<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>树莓派安装记录-usb-samba-aria2-xware-apt-get | 老高的技术博客</title><meta name=keywords content="raspberry,samba,ntfs,xware"><meta name=description content="老高的R6300v2自从刷了梅林后，一直在挂硬盘做迅雷离线下载。眼看着夏天到了，还是给路由器减减压，于是祭出老早买的树莓派2B，再次踏上折腾之路。"><meta name=author content="Me"><link rel=canonical href=https://phpgao.github.io/raspberry_setup_tool.html><link crossorigin=anonymous href=/assets/css/stylesheet.min.1a6ee89730e13a801d0f34e0cb5b98e96cf8c65b80500638bd599fc224ed8442.css integrity="sha256-Gm7olzDhOoAdDzTgy1uY6Wz4xluAUAY4vVmfwiTthEI=" rel="preload stylesheet" as=style><link rel=preload href="https://cdn.v2ex.com/gravatar/2b66f45a3e2f41db6522381006bfaea1?s=192" as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://phpgao.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://phpgao.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://phpgao.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://phpgao.github.io/apple-touch-icon.png><link rel=mask-icon href=https://phpgao.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.83.1"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-39288145-2','auto'),ga('send','pageview'))</script><meta property="og:title" content="树莓派安装记录-usb-samba-aria2-xware-apt-get"><meta property="og:description" content="老高的R6300v2自从刷了梅林后，一直在挂硬盘做迅雷离线下载。眼看着夏天到了，还是给路由器减减压，于是祭出老早买的树莓派2B，再次踏上折腾之路。"><meta property="og:type" content="article"><meta property="og:url" content="https://phpgao.github.io/raspberry_setup_tool.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2017-03-15T15:49:00+00:00"><meta property="article:modified_time" content="2017-03-15T15:49:00+00:00"><meta property="og:site_name" content="老高的技术博客"><meta name=twitter:card content="summary"><meta name=twitter:title content="树莓派安装记录-usb-samba-aria2-xware-apt-get"><meta name=twitter:description content="老高的R6300v2自从刷了梅林后，一直在挂硬盘做迅雷离线下载。眼看着夏天到了，还是给路由器减减压，于是祭出老早买的树莓派2B，再次踏上折腾之路。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://phpgao.github.io/posts/"},{"@type":"ListItem","position":2,"name":"树莓派安装记录-usb-samba-aria2-xware-apt-get","item":"https://phpgao.github.io/raspberry_setup_tool.html"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"树莓派安装记录-usb-samba-aria2-xware-apt-get","name":"树莓派安装记录-usb-samba-aria2-xware-apt-get","description":"老高的R6300v2自从刷了梅林后，一直在挂硬盘做迅雷离线下载。眼看着夏天到了，还是给路由器减减压，于是祭出老早买的树莓派2B，再次踏上折腾之路。\n","keywords":["raspberry","samba","ntfs","xware"],"articleBody":"老高的R6300v2自从刷了梅林后，一直在挂硬盘做迅雷离线下载。眼看着夏天到了，还是给路由器减减压，于是祭出老早买的树莓派2B，再次踏上折腾之路。\n系统下载  Download Raspbian Centos7 老高推荐Raspbian - RASPBIAN JESSIE LITE 其他系统  搜教程 教程还是官网靠谱\n INSTALLING OPERATING SYSTEM IMAGES INSTALLING OPERATING SYSTEM IMAGES USING WINDOWS INSTALLING OPERATING SYSTEM IMAGES ON MAC OS INSTALLING OPERATING SYSTEM IMAGES ON LINUX  Win系统下直接Win32 Disk Imager，然后选镜像，点Write即可！\n启动系统  新版的系统默认是没有开启ssh的，所以准备远程ssh管理树莓派的话，给SD卡写完数据后一定要在BOOT分区建个名为ssh的文件，创建一个TXT，然后改名为ssh或者touch ssh即可！\n ssh pi@192.168.1.111 passwd : raspberry apt加速 aspbian镜像使用帮助\nsudo vi /etc/apt/sources.list文件。删除原文件所有内容，用以下内容取代：\ndeb http://mirrors.ustc.edu.cn/raspbian/raspbian/ jessie main non-free contrib deb-src http://mirrors.ustc.edu.cn/raspbian/raspbian/ jessie main non-free contrib 编辑此文件后，请使用sudo apt-get update命令，更新软件列表。\n更多源\n修复vim的方向键变为ABCD的方法 sudo vi /etc/vim/vimrc.tiny # 最后添加 set nocompatible 实用工具 raspi-config树莓派自带工具\nsudo raspi-config ↓ raspi-config运行界面\n↓ 点击advanced–expand，然后重启就可以找回丢失的SD卡空间\n还有4.Localisation可以设定时区等信息，在此就不再赘述了。\n安装zsh和omz\nsudo apt-get install -y zsh git sudo curl -L https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh | sh 硬盘挂载 sudo apt-get install -y ntfs-3g sudo mkdir -p /mnt/data # 直接挂载 mount /dev/sda1 /mnt/data # 或使用配置挂载 sudo cp /etc/fstab /etc/fstab.backup sudo vi /etc/fstab # add /dev/sda1 /mnt/data auto defaults,utf8,umask=000 0 0 # 第二块硬盘 /dev/sdb1 /mnt/hd ext4 defaults,rw 0 0 # NTFS /dev/sda3 /mnt/volume ntfs defaults 0 0 # 不用重启 sudo mount -a ls -al /mnt/data # 检查权限 touch /mnt/data/test samba sudo apt-get install samba samba-common-bin sudo vi /etc/samba/smb.conf #add [data] comment = No comments path = /mnt/data browseable = yes writable = yes public = yes 或者想要配合用户名使用\n[data] comment = No comments valid users = pi path = /mnt/data browseable = yes writable = yes public = yes sudo smbpasswd -a pi New SMB password: Retype new SMB password: Added user pi. sudo /etc/init.d/samba restart 在explorer中输入\\\\192.168.1.111，即Pi的IP，提示用户名密码，输入anonymous即可！\n远程下载（已废弃） # 通过ssh上传文件 scp Xware1.0.31_armel_v5te_glibc.zip pi@192.168.1.111:~ ssh pi@192.168.1.111 mkdir xunlei mv Xware1.0.31_armel_v5te_glibc.zip xunlei/ cd xunlei \u0026\u0026 unzip Xware1.0.31_armel_v5te_glibc.zip ./portal sudo chmod a+x /etc/rc.local sudo vi /etc/rc.local #add /home/pi/xunlei/portal sleep 5 aria2 安装配置 conf例子在phpgao/aria2.conf\n# 安装 sudo apt-get install aria2 -y # 默认配置文件夹，如果不配置则使用 --conf-path=/home/pi/aria2.conf 指定 mkdir -p /home/pi/.aria2/ # 默认下载文件夹 mkdir -p /mnt/data/download # 下载配置到本地默认位置 wget https://gist.githubusercontent.com/phpgao/3eb55c223c2bced278a4f5ca24fc5874/raw/2a0181b4f3381c5e6a324a9a654e4daa3b0518f0/aria2.conf -O /home/pi/.aria2/aria2.conf 运行和启动 # 后台运行 aria2c --enable-rpc --rpc-listen-all --enable-dht -D # 开机启动 sudo vi /etc/rc.local # add # run command as pi su pi -c \"aria2c --enable-rpc --rpc-listen-all --enable-dht -D\" su pi -c \"/home/pi/xunlei/portal\" exit 0  小贴士，如果需要更新trackerslist，可以到ngosang/trackerslist下载最新的列表，老高推荐使用trackers_all_ip，获取后使用在线正则表达式测试，将\\n\\n替换为,，然后加入配置文件里即可！\n 一些技巧 如果要远程管理aria2，那么可以把树莓派的6800端口映射出来，然后可以托管到在线服务，比如\n Yet Another Aria2 Web Frontend Aria2 WebUI  如果不放心，可以自己搭建nginx服务器，然后把Aria2 Web Frontend项目放到/var/www/html下，就可以在内网直接用IP访问控制台了。\n配置说明-en 配置说明-zh\n开机启动 # 配置locale export LC_ALL=C # 启用服务 systemctl enable samba rc.local nginx # 检查服务 systemctl list-units --type=service|grep run FRP 先使用wget下载最新的linux_arm版本的frp github链接\nwget https://github.com/fatedier/frp/releases/download/v0.20.0/frp_0.20.0_linux_arm.tar.gz tar zxf frp_0.20.0_linux_arm.tar.gz cd frp_0.20.0_linux_arm mv frpc /usr/local/bin/frpc mkdir /etc/frp/ cp frpc.ini /etc/frp/ # 之后编辑/etc/frp/frpc.ini，直到符合要求 最后编辑/etc/systemd/system/frpc.service，写入以下内容\n[Unit] Description=frpc daemon After=network.target [Service] Type=simple ExecStart=/usr/local/bin/frpc -c /etc/frp/frpc.ini ExecReload=/usr/local/bin/frpc -c /etc/frp/frpc.ini reload Restart=always RestartSec=5s [Install] WantedBy=multi-user.target 这样frpc就变为服务了！\nsystemctl enable frpc systemctl restart frpc systemctl status frpc ","wordCount":"398","inLanguage":"en","datePublished":"2017-03-15T15:49:00Z","dateModified":"2017-03-15T15:49:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://phpgao.github.io/raspberry_setup_tool.html"},"publisher":{"@type":"Organization","name":"老高的技术博客","logo":{"@type":"ImageObject","url":"https://phpgao.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://phpgao.github.io/ accesskey=h title="老高的博客 (Alt + H)">老高的博客</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://phpgao.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://phpgao.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://blog.phpgao.com title="old blog"><span>old blog</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://phpgao.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://phpgao.github.io/posts/>Posts</a></div><h1 class=post-title>树莓派安装记录-usb-samba-aria2-xware-apt-get</h1><div class=post-meta>March 15, 2017&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/2017-03-15_raspberry_setup_tool.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>老高的R6300v2自从刷了梅林后，一直在挂硬盘做迅雷离线下载。眼看着夏天到了，还是给路由器减减压，于是祭出老早买的树莓派2B，再次踏上折腾之路。</p><h2 id=系统下载>系统下载<a hidden class=anchor aria-hidden=true href=#系统下载>#</a></h2><ul><li><a href=https://www.raspberrypi.org/downloads/>Download Raspbian</a></li><li><a href=http://mirror.centos.org/altarch/7/isos/armhfp/>Centos7</a></li><li>老高推荐<a href=https://www.raspberrypi.org/downloads/raspbian/>Raspbian - RASPBIAN JESSIE LITE</a></li><li><a href=http://www.raspbian.org/RaspbianImages#Unofficial_Raspbian_Images>其他系统</a></li></ul><h2 id=搜教程>搜教程<a hidden class=anchor aria-hidden=true href=#搜教程>#</a></h2><p>教程还是官网靠谱</p><ul><li><a href=https://www.raspberrypi.org/documentation/installation/installing-images/README.md>INSTALLING OPERATING SYSTEM IMAGES</a></li><li><a href=https://www.raspberrypi.org/documentation/installation/installing-images/windows.md>INSTALLING OPERATING SYSTEM IMAGES USING WINDOWS</a></li><li><a href=https://www.raspberrypi.org/documentation/installation/installing-images/mac.md>INSTALLING OPERATING SYSTEM IMAGES ON MAC OS</a></li><li><a href=https://www.raspberrypi.org/documentation/installation/installing-images/linux.md>INSTALLING OPERATING SYSTEM IMAGES ON LINUX</a></li></ul><p>Win系统下直接<a href=https://sourceforge.net/projects/win32diskimager/>Win32 Disk Imager</a>，然后选镜像，点Write即可！</p><h2 id=启动系统>启动系统<a hidden class=anchor aria-hidden=true href=#启动系统>#</a></h2><blockquote><p>新版的系统默认是没有开启ssh的，所以准备远程ssh管理树莓派的话，给SD卡写完数据后一定要在BOOT分区建个名为<code>ssh</code>的文件，创建一个TXT，然后改名为ssh或者<code>touch ssh</code>即可！</p></blockquote><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>ssh pi@192.168.1.111
passwd : raspberry
</code></pre></div><h2 id=apt加速>apt加速<a hidden class=anchor aria-hidden=true href=#apt加速>#</a></h2><p><a href=https://lug.ustc.edu.cn/wiki/mirrors/help/raspbian>aspbian镜像使用帮助</a></p><p><code>sudo vi /etc/apt/sources.list</code>文件。删除原文件所有内容，用以下内容取代：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>deb http://mirrors.ustc.edu.cn/raspbian/raspbian/ jessie main non-free contrib
deb-src http://mirrors.ustc.edu.cn/raspbian/raspbian/ jessie main non-free contrib
</code></pre></div><p>编辑此文件后，请使用<code>sudo apt-get update</code>命令，更新软件列表。</p><p><a href=http://shumeipai.nxez.com/2013/08/31/raspbian-chinese-software-source.html>更多源</a></p><h2 id=修复vim的方向键变为abcd的方法>修复vim的方向键变为ABCD的方法<a hidden class=anchor aria-hidden=true href=#修复vim的方向键变为abcd的方法>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>sudo vi /etc/vim/vimrc.tiny

# 最后添加
set nocompatible
</code></pre></div><h2 id=实用工具>实用工具<a hidden class=anchor aria-hidden=true href=#实用工具>#</a></h2><p><a href=https://github.com/RPi-Distro/raspi-config>raspi-config</a>树莓派自带工具</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo raspi-config
</code></pre></div><p>↓ raspi-config运行界面</p><p><img loading=lazy src=https://blog.phpgao.com/usr/uploads/2017/03/2721557335.jpg alt=raspi-config></p><p>↓ 点击advanced&ndash;>expand，然后重启就可以找回丢失的SD卡空间</p><p><img loading=lazy src=https://blog.phpgao.com/usr/uploads/2017/03/2755792594.png alt=expand></p><p>还有4.Localisation可以设定时区等信息，在此就不再赘述了。</p><p>安装zsh和omz</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>sudo apt-get install -y zsh git
sudo curl -L https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh | sh
</code></pre></div><h2 id=硬盘挂载>硬盘挂载<a hidden class=anchor aria-hidden=true href=#硬盘挂载>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo apt-get install -y ntfs-3g
sudo mkdir -p /mnt/data

<span style=color:#75715e># 直接挂载</span>
mount /dev/sda1 /mnt/data

<span style=color:#75715e># 或使用配置挂载</span>
sudo cp /etc/fstab /etc/fstab.backup
sudo vi /etc/fstab
<span style=color:#75715e># add</span>
/dev/sda1       /mnt/data       auto    defaults,utf8,umask<span style=color:#f92672>=</span><span style=color:#ae81ff>000</span> <span style=color:#ae81ff>0</span>    <span style=color:#ae81ff>0</span>
<span style=color:#75715e># 第二块硬盘</span>
/dev/sdb1       /mnt/hd         ext4    defaults,rw <span style=color:#ae81ff>0</span>    <span style=color:#ae81ff>0</span>
<span style=color:#75715e># NTFS</span>
/dev/sda3      /mnt/volume      ntfs    defaults <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>0</span>
<span style=color:#75715e># 不用重启</span>
sudo mount -a
ls -al /mnt/data
<span style=color:#75715e># 检查权限</span>
touch /mnt/data/test
</code></pre></div><h2 id=samba>samba<a hidden class=anchor aria-hidden=true href=#samba>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sudo apt-get install samba samba-common-bin

sudo vi /etc/samba/smb.conf

<span style=color:#75715e>#add</span>

<span style=color:#f92672>[</span>data<span style=color:#f92672>]</span>
    comment <span style=color:#f92672>=</span> No comments
    path <span style=color:#f92672>=</span> /mnt/data
    browseable <span style=color:#f92672>=</span> yes
    writable <span style=color:#f92672>=</span> yes
    public <span style=color:#f92672>=</span> yes
</code></pre></div><p>或者想要配合用户名使用</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#f92672>[</span>data<span style=color:#f92672>]</span>
    comment <span style=color:#f92672>=</span> No comments
    valid users <span style=color:#f92672>=</span> pi
    path <span style=color:#f92672>=</span> /mnt/data
    browseable <span style=color:#f92672>=</span> yes
    writable <span style=color:#f92672>=</span> yes
    public <span style=color:#f92672>=</span> yes



sudo smbpasswd -a pi
New SMB password:
Retype new SMB password:
Added user pi.


sudo /etc/init.d/samba restart
</code></pre></div><p>在explorer中输入<code>\\192.168.1.111</code>，即Pi的IP，提示用户名密码，输入<strong>anonymous</strong>即可！</p><h2 id=远程下载已废弃>远程下载（已废弃）<a hidden class=anchor aria-hidden=true href=#远程下载已废弃>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># 通过ssh上传文件</span>
scp Xware1.0.31_armel_v5te_glibc.zip pi@192.168.1.111:~

ssh pi@192.168.1.111

mkdir xunlei
mv Xware1.0.31_armel_v5te_glibc.zip xunlei/
cd xunlei <span style=color:#f92672>&amp;&amp;</span> unzip Xware1.0.31_armel_v5te_glibc.zip
./portal

sudo chmod a+x /etc/rc.local
sudo vi /etc/rc.local

<span style=color:#75715e>#add</span>
/home/pi/xunlei/portal
sleep <span style=color:#ae81ff>5</span>
</code></pre></div><h2 id=aria2>aria2<a hidden class=anchor aria-hidden=true href=#aria2>#</a></h2><h3 id=安装配置>安装配置<a hidden class=anchor aria-hidden=true href=#安装配置>#</a></h3><p>conf例子在<a href=https://gist.github.com/phpgao/3eb55c223c2bced278a4f5ca24fc5874>phpgao/aria2.conf</a></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># 安装</span>
sudo apt-get install aria2 -y

<span style=color:#75715e># 默认配置文件夹，如果不配置则使用 --conf-path=/home/pi/aria2.conf 指定</span>
mkdir -p /home/pi/.aria2/
<span style=color:#75715e># 默认下载文件夹</span>
mkdir -p /mnt/data/download

<span style=color:#75715e># 下载配置到本地默认位置</span>
wget https://gist.githubusercontent.com/phpgao/3eb55c223c2bced278a4f5ca24fc5874/raw/2a0181b4f3381c5e6a324a9a654e4daa3b0518f0/aria2.conf -O /home/pi/.aria2/aria2.conf

</code></pre></div><h3 id=运行和启动>运行和启动<a hidden class=anchor aria-hidden=true href=#运行和启动>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback># 后台运行
aria2c --enable-rpc --rpc-listen-all --enable-dht -D

# 开机启动
sudo vi /etc/rc.local
# add

# run command as pi
su pi -c &#34;aria2c --enable-rpc --rpc-listen-all --enable-dht -D&#34;

su pi -c &#34;/home/pi/xunlei/portal&#34;

exit 0
</code></pre></div><blockquote><p>小贴士，如果需要更新trackerslist，可以到<a href=https://github.com/ngosang/trackerslist>ngosang/trackerslist</a>下载最新的列表，老高推荐使用<strong>trackers_all_ip</strong>，获取后使用<a href=http://tool.oschina.net/regex>在线正则表达式测试</a>，将<code>\n\n</code>替换为<code>,</code>，然后加入配置文件里即可！</p></blockquote><h3 id=一些技巧>一些技巧<a hidden class=anchor aria-hidden=true href=#一些技巧>#</a></h3><p>如果要远程管理aria2，那么可以把树莓派的6800端口映射出来，然后可以托管到在线服务，比如</p><ul><li><a href=http://yaaw.ghostry.cn>Yet Another Aria2 Web Frontend</a></li><li><a href=http://webui-aria2.ghostry.cn>Aria2 WebUI</a></li></ul><p>如果不放心，可以自己搭建nginx服务器，然后把<a href=http://dy.ghostry.cn>Aria2 Web Frontend项目</a>放到/var/www/html下，就可以在内网直接用IP访问控制台了。</p><p><a href=https://aria2.github.io/manual/en/html/aria2c.html>配置说明-en</a>
<a href=http://aria2c.com/usage.html>配置说明-zh</a></p><h2 id=开机启动>开机启动<a hidden class=anchor aria-hidden=true href=#开机启动>#</a></h2><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># 配置locale</span>
export LC_ALL<span style=color:#f92672>=</span>C

<span style=color:#75715e># 启用服务</span>
systemctl enable samba rc.local nginx

<span style=color:#75715e># 检查服务</span>
systemctl list-units --type<span style=color:#f92672>=</span>service|grep run
</code></pre></div><h2 id=frp>FRP<a hidden class=anchor aria-hidden=true href=#frp>#</a></h2><p>先使用wget下载最新的linux_arm版本的frp <a href=https://github.com/fatedier/frp/releases>github链接</a></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>wget https://github.com/fatedier/frp/releases/download/v0.20.0/frp_0.20.0_linux_arm.tar.gz

tar zxf frp_0.20.0_linux_arm.tar.gz
cd frp_0.20.0_linux_arm
mv frpc /usr/local/bin/frpc

mkdir /etc/frp/
cp frpc.ini /etc/frp/
# 之后编辑/etc/frp/frpc.ini，直到符合要求
</code></pre></div><p>最后编辑<code>/etc/systemd/system/frpc.service</code>，写入以下内容</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>[Unit]
Description=frpc daemon
After=network.target

[Service]
Type=simple
ExecStart=/usr/local/bin/frpc -c /etc/frp/frpc.ini
ExecReload=/usr/local/bin/frpc -c /etc/frp/frpc.ini reload
Restart=always
RestartSec=5s

[Install]
WantedBy=multi-user.target
</code></pre></div><p>这样frpc就变为服务了！</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>systemctl enable frpc
systemctl restart frpc
systemctl status frpc

</code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://phpgao.github.io/tags/raspberry/>raspberry</a></li><li><a href=https://phpgao.github.io/tags/samba/>samba</a></li><li><a href=https://phpgao.github.io/tags/ntfs/>ntfs</a></li><li><a href=https://phpgao.github.io/tags/xware/>xware</a></li></ul><nav class=paginav><a class=prev href=https://phpgao.github.io/cron_on_centos.html><span class=title>« Prev Page</span><br><span>Cron在Centos上的安装方法</span></a>
<a class=next href=https://phpgao.github.io/laravel_container.html><span class=title>Next Page »</span><br><span>Laravel的容器的工作原理</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://phpgao.github.io/>老高的技术博客</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>