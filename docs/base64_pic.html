<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>php将image转换为base64编码 | 老高的技术博客</title><meta name=keywords content="PHP,compress,base64"><meta name=description content="引用PHP手册里的一评论

This will greatly reduce your page load time as the browser will only
need to send one server request for the entire page, rather than
multiple requests for the HTML and the images. Requests need to be
uploaded and 99% of the world are limited on their upload speed to the
server.

翻译一下就是
这种方式能够大大减少页面载入时间，因为整个页面只需要一个请求，多个针对html文档和图片的请求。请求需要被提(上)交(传)，但是99%的上传速度是被限制的。
所以减少请求也是一个明确的选择！"><meta name=author content="Me"><link rel=canonical href=https://phpgao.github.io/base64_pic.html><link crossorigin=anonymous href=/assets/css/stylesheet.min.1a6ee89730e13a801d0f34e0cb5b98e96cf8c65b80500638bd599fc224ed8442.css integrity="sha256-Gm7olzDhOoAdDzTgy1uY6Wz4xluAUAY4vVmfwiTthEI=" rel="preload stylesheet" as=style><link rel=preload href="https://cdn.v2ex.com/gravatar/2b66f45a3e2f41db6522381006bfaea1?s=192" as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://phpgao.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://phpgao.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://phpgao.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://phpgao.github.io/apple-touch-icon.png><link rel=mask-icon href=https://phpgao.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.83.1"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-39288145-2','auto'),ga('send','pageview'))</script><meta property="og:title" content="php将image转换为base64编码"><meta property="og:description" content="引用PHP手册里的一评论

This will greatly reduce your page load time as the browser will only
need to send one server request for the entire page, rather than
multiple requests for the HTML and the images. Requests need to be
uploaded and 99% of the world are limited on their upload speed to the
server.

翻译一下就是
这种方式能够大大减少页面载入时间，因为整个页面只需要一个请求，多个针对html文档和图片的请求。请求需要被提(上)交(传)，但是99%的上传速度是被限制的。
所以减少请求也是一个明确的选择！"><meta property="og:type" content="article"><meta property="og:url" content="https://phpgao.github.io/base64_pic.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-07-25T03:57:00+00:00"><meta property="article:modified_time" content="2014-07-25T03:57:00+00:00"><meta property="og:site_name" content="老高的技术博客"><meta name=twitter:card content="summary"><meta name=twitter:title content="php将image转换为base64编码"><meta name=twitter:description content="引用PHP手册里的一评论

This will greatly reduce your page load time as the browser will only
need to send one server request for the entire page, rather than
multiple requests for the HTML and the images. Requests need to be
uploaded and 99% of the world are limited on their upload speed to the
server.

翻译一下就是
这种方式能够大大减少页面载入时间，因为整个页面只需要一个请求，多个针对html文档和图片的请求。请求需要被提(上)交(传)，但是99%的上传速度是被限制的。
所以减少请求也是一个明确的选择！"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://phpgao.github.io/posts/"},{"@type":"ListItem","position":2,"name":"php将image转换为base64编码","item":"https://phpgao.github.io/base64_pic.html"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"php将image转换为base64编码","name":"php将image转换为base64编码","description":"引用PHP手册里的一评论\n This will greatly reduce your page load time as the browser will only need to send one server request for the entire page, rather than multiple requests for the HTML and the images. Requests need to be uploaded and 99% of the world are limited on their upload speed to the server.\n 翻译一下就是\n这种方式能够大大减少页面载入时间，因为整个页面只需要一个请求，多个针对html文档和图片的请求。请求需要被提(上)交(传)，但是99%的上传速度是被限制的。\n所以减少请求也是一个明确的选择！\n","keywords":["PHP","compress","base64"],"articleBody":"引用PHP手册里的一评论\n This will greatly reduce your page load time as the browser will only need to send one server request for the entire page, rather than multiple requests for the HTML and the images. Requests need to be uploaded and 99% of the world are limited on their upload speed to the server.\n 翻译一下就是\n这种方式能够大大减少页面载入时间，因为整个页面只需要一个请求，多个针对html文档和图片的请求。请求需要被提(上)交(传)，但是99%的上传速度是被限制的。\n所以减少请求也是一个明确的选择！\n程序很简单，替换一下example.jpg为你的图片路径即可！\nphp $file = \"example.jpg\"; $type = getimagesize( $file ); //取得图片的大小，类型等 $file_content = base64_encode( file_get_contents( $file ) ); switch ( $type[2] ) { //判读图片类型 \tcase 1: $img_type = \"gif\"; break; case 2: $img_type = \"jpg\"; break; case 3: $img_type = \"png\"; break; } $img = 'data:image/' . $img_type . ';base64,' . $file_content; //合成图片的base64编码  echo '. $img . '\" '; 再来个python版本的\nimport base64 path = r'C:\\Users\\Administrator\\Desktop\\logo.png' f = open(path,'rb') b64 = base64.b64encode(f.read()) f.close() print b64 ","wordCount":"132","inLanguage":"en","datePublished":"2014-07-25T03:57:00Z","dateModified":"2014-07-25T03:57:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://phpgao.github.io/base64_pic.html"},"publisher":{"@type":"Organization","name":"老高的技术博客","logo":{"@type":"ImageObject","url":"https://phpgao.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://phpgao.github.io/ accesskey=h title="老高的博客 (Alt + H)">老高的博客</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://phpgao.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://phpgao.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://blog.phpgao.com title="old blog"><span>old blog</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://phpgao.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://phpgao.github.io/posts/>Posts</a></div><h1 class=post-title>php将image转换为base64编码</h1><div class=post-meta>July 25, 2014&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/2014-07-25_base64_pic.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>引用PHP手册里的一评论</p><blockquote><p>This will greatly reduce your page load time as the browser will only
need to send one server request for the entire page, rather than
multiple requests for the HTML and the images. Requests need to be
uploaded and 99% of the world are limited on their upload speed to the
server.</p></blockquote><p>翻译一下就是</p><p>这种方式能够大大减少页面载入时间，因为整个页面只需要一个请求，多个针对html文档和图片的请求。请求需要被提(上)交(传)，但是99%的上传速度是被限制的。</p><p>所以减少请求也是一个明确的选择！</p><p>程序很简单，替换一下example.jpg为你的图片路径即可！</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
$file <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;example.jpg&#34;</span>;
$type <span style=color:#f92672>=</span> <span style=color:#a6e22e>getimagesize</span>( $file ); <span style=color:#75715e>//取得图片的大小，类型等
</span><span style=color:#75715e></span>$file_content <span style=color:#f92672>=</span> <span style=color:#a6e22e>base64_encode</span>( <span style=color:#a6e22e>file_get_contents</span>( $file ) );
<span style=color:#66d9ef>switch</span> ( $type[<span style=color:#ae81ff>2</span>] ) { <span style=color:#75715e>//判读图片类型
</span><span style=color:#75715e></span>	<span style=color:#66d9ef>case</span> <span style=color:#ae81ff>1</span><span style=color:#f92672>:</span>
		$img_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;gif&#34;</span>;
		<span style=color:#66d9ef>break</span>;
	<span style=color:#66d9ef>case</span> <span style=color:#ae81ff>2</span><span style=color:#f92672>:</span>
		$img_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;jpg&#34;</span>;
		<span style=color:#66d9ef>break</span>;
	<span style=color:#66d9ef>case</span> <span style=color:#ae81ff>3</span><span style=color:#f92672>:</span>
		$img_type <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;png&#34;</span>;
		<span style=color:#66d9ef>break</span>;
}
$img <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;data:image/&#39;</span> <span style=color:#f92672>.</span> $img_type <span style=color:#f92672>.</span> <span style=color:#e6db74>&#39;;base64,&#39;</span> <span style=color:#f92672>.</span> $file_content; <span style=color:#75715e>//合成图片的base64编码
</span><span style=color:#75715e></span>
<span style=color:#66d9ef>echo</span> <span style=color:#e6db74>&#39;&lt;img src=&#34;&#39;</span> <span style=color:#f92672>.</span> $img <span style=color:#f92672>.</span> <span style=color:#e6db74>&#39;&#34; &gt;&#39;</span>;
</code></pre></div><p>再来个python版本的</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#f92672>import</span> base64

path <span style=color:#f92672>=</span> <span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;C:\Users\Administrator\Desktop\logo.png&#39;</span>

f <span style=color:#f92672>=</span> open(path,<span style=color:#e6db74>&#39;rb&#39;</span>)
b64 <span style=color:#f92672>=</span> base64<span style=color:#f92672>.</span>b64encode(f<span style=color:#f92672>.</span>read())
f<span style=color:#f92672>.</span>close()

<span style=color:#66d9ef>print</span> b64
</code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://phpgao.github.io/tags/php/>PHP</a></li><li><a href=https://phpgao.github.io/tags/compress/>compress</a></li><li><a href=https://phpgao.github.io/tags/base64/>base64</a></li></ul><nav class=paginav><a class=prev href=https://phpgao.github.io/typecho.html><span class=title>« Prev Page</span><br><span>typecho的优化设置</span></a>
<a class=next href=https://phpgao.github.io/typecho_toc.html><span class=title>Next Page »</span><br><span>让typecho支持table-of-contents</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://phpgao.github.io/>老高的技术博客</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>