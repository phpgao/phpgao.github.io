<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>2018面试总结 | 老高的技术博客</title><meta name=keywords content="面试"><meta name=description content="

找新工作的念头是在今年6月开始萌发的，其实当时已经开始投简历了，结果因为种种原因(主要是忙?)拖到这会儿才真正开始面试。投简历的平台是boss直聘，简历用的jobDeer的模板，用md写好，生成pdf和doc格式，挂在自己的网站下，方便下载和浏览。"><meta name=author content="Me"><link rel=canonical href=https://phpgao.github.io/2018_new_start.html><link crossorigin=anonymous href=/assets/css/stylesheet.min.1a6ee89730e13a801d0f34e0cb5b98e96cf8c65b80500638bd599fc224ed8442.css integrity="sha256-Gm7olzDhOoAdDzTgy1uY6Wz4xluAUAY4vVmfwiTthEI=" rel="preload stylesheet" as=style><link rel=preload href="https://cdn.v2ex.com/gravatar/2b66f45a3e2f41db6522381006bfaea1?s=192" as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://phpgao.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://phpgao.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://phpgao.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://phpgao.github.io/apple-touch-icon.png><link rel=mask-icon href=https://phpgao.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.83.1"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-39288145-2','auto'),ga('send','pageview'))</script><meta property="og:title" content="2018面试总结"><meta property="og:description" content="

找新工作的念头是在今年6月开始萌发的，其实当时已经开始投简历了，结果因为种种原因(主要是忙?)拖到这会儿才真正开始面试。投简历的平台是boss直聘，简历用的jobDeer的模板，用md写好，生成pdf和doc格式，挂在自己的网站下，方便下载和浏览。"><meta property="og:type" content="article"><meta property="og:url" content="https://phpgao.github.io/2018_new_start.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-11-29T14:17:00+00:00"><meta property="article:modified_time" content="2018-11-29T14:17:00+00:00"><meta property="og:site_name" content="老高的技术博客"><meta name=twitter:card content="summary"><meta name=twitter:title content="2018面试总结"><meta name=twitter:description content="

找新工作的念头是在今年6月开始萌发的，其实当时已经开始投简历了，结果因为种种原因(主要是忙?)拖到这会儿才真正开始面试。投简历的平台是boss直聘，简历用的jobDeer的模板，用md写好，生成pdf和doc格式，挂在自己的网站下，方便下载和浏览。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://phpgao.github.io/posts/"},{"@type":"ListItem","position":2,"name":"2018面试总结","item":"https://phpgao.github.io/2018_new_start.html"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"2018面试总结","name":"2018面试总结","description":"找新工作的念头是在今年6月开始萌发的，其实当时已经开始投简历了，结果因为种种原因(主要是忙?)拖到这会儿才真正开始面试。投简历的平台是boss直聘，简历用的jobDeer的模板，用md写好，生成pdf和doc格式，挂在自己的网站下，方便下载和浏览。\n","keywords":["面试"],"articleBody":"找新工作的念头是在今年6月开始萌发的，其实当时已经开始投简历了，结果因为种种原因(主要是忙?)拖到这会儿才真正开始面试。投简历的平台是boss直聘，简历用的jobDeer的模板，用md写好，生成pdf和doc格式，挂在自己的网站下，方便下载和浏览。\n现状 从上周开始疯狂投简历，目前收到了ABCDE公司的面试邀请，并且已经拿到了2个OFFER。目前还在等2家公司的面试，但愿到时候能正常发挥吧！\n感悟 企业面试主要是考察面试者的能力，编码能力固然重要，但是也请不要忽略沟通交流能力的重要性，即获取信息和表达信息的能力，类似代码里的get()和echo()一样，能够准确的获取对方想要表达的重点(key)，并且能够用最简单的言语或者图形表达出自己string，自然是极好的！\n当然，扎实的编码能力也是不能丢下的，大到能够规划一个网站的架构，小到用js写一段ajax请求，都需要自己一点一点的学习和积累。这里老高给做技术的同学们一个建议，最好有自己的独立博客，不论是用gayhub，还是自己买服务器，最差也要在CSDN开一个账户，写一写自己的开发中遇到的问题以及解决方案，或者自己对一些东西的研究，日积月累下来肯定会自己有很大的提升，不论是表达能力还是编码能力，同时你的文章也可能帮助到大家，这种一箭双雕的事情真的可以搞一搞！\n最后，从反面出发，要意识到自己的不足，从而针对自己的不足进行强化。\n面试题 由于老高记性不太好，所以赶紧把自己能够回想起来的面试题复盘一下，给PHPer后来面试的时候有一个参考！简单的回答我会写，复杂的慢慢补。一时间答不上来赶紧自己Google之。\n ps. 基本的PHP用法一定要掌握！从INI配置到PHP面向对象的用法，不能说完全掌握，最起码见到一个概念能够说出来个123。\n  pps.Linux的技能水平也不能落下，连LAMP都没玩过，谁给你的勇气去面试？\n 下面试题不分先后顺序，老高想到哪儿写到哪儿！\n composer都解决了什么问题？  依赖  tcp长连接如何保活？  重试 心跳  php如何接受二进制数据？  php://input $GLOBALS['HTTP_RAW_POST_DATA']  分布式系统如何追踪请求？  Google Dapper  微服务之间如何保证数据一致性？  可靠事件 对账 TCC（Try-Confirm-Cancel）  PHP如何实时生成Excel并下载？  # 大数据量最好使用id去分段，并且设置合理的导出超时时间 $fp = fopen('php://output', 'a'); fputs($fp, 'strings'); .... fclose($fp)  分表的策略？  垂直和水平 取模 hash(crc32) 一致性hash  php提高文件发送性能？  x-sendfile  nginx和apache的不同？nginx高性能体现在哪儿？  点有很多 apache每个事件消费者独占一个进程资源，nginx只是被事件分发者进程短期调用而已。  nginx如何解决惊群？  同一时间只有一个work进程监听请求，使用锁实现  CAP原则？  CAP原则又称CAP定理，指的是在一个分布式系统中， Consistency（一致性）、 Availability（可用性）、Partition tolerance（分区容错性），三者不可兼得。  PG 和 Mysql的对比？  PostgreSQL 与 MySQL 相比，优势何在？\n很多，SQL标准的支持，更多的字段，jsonb(json的各种骚操作，建索引，Nosql)，性能抖动低，商业友好。 不好分区，有真空操作影响性能，没有MySQL流行  PHP的劣势？  对比Golang，非静态语言，需要编译(JIT有一定的缓解)，包的概念推出较晚。  PHP垃圾回收机制？  初期采用引用计数法，5.3后引入根缓存区，主要解决了循环引用，让内存溢出保持在一个范围内。  如何解决ajax跨域？  jsonp 服务器响应头Access-Control-Allow-Origin iframe  PHP如何获取客户端IP？  从`$_SERVER`中获取，REMOTE_ADDR和HTTP_X_FORWARDED_FOR，需要区分有没有使用代理  redis排行榜怎么使用？  # sorted set，步骤 # 添加分数 ZADD key score1 member1 [score2 member2] # 查询排名 zrevrank key user3 # 获取所有 zrevrange key 0 -1 withscores  nginx负载均衡怎么做？  添加upstream 用语法proxy-pass指向这个upstream nginx的负载均衡有4种模式： 1)、轮询（默认） 每个请求按时间顺序逐一分配到不同的后端服务器，如果后端服务器down掉，能自动剔除。 2)、weight 指定轮询几率，weight和访问比率成正比，用于后端服务器性能不均的情况。 2)、ip_hash 每个请求按访问ip的hash结果分配，这样每个访客固定访问一个后端服务器，可以解决session的问题。 3)、fair（第三方） 按后端服务器的响应时间来分配请求，响应时间短的优先分配。 4)、url_hash（第三方）  MySQL优化步骤？  - 优化字段类型，优化sql，索引和慢查询(针对存储引擎优化) - 适当的做一些冗余(可选) - 加入缓存，减轻DB压力 - 加入读写分离，用中间件或者在代码层处理 - 预估数据增量和读写比，准备合适的分表策略 - 垂直业务拆分 - 水平分表  解决脏读、不可重复读、幻读的办法？  主要考察事务的隔离级别， READ_UNCOMMITTED READ_COMMITTED REPEATABLE READ SERIALIZABLE 并发性能递减  悲观锁，乐观锁？  悲观锁也就是排它锁，for update，注意表锁和行锁。 乐观锁加入了版本管理的概念， update table set x=x+1, version=version+1 where id=#{id} and version=#{version};  简单的抽奖？  我的思路是把预先奖品放到redis的队列中。  redis的分布式锁？  参考很有名的Redlock，分为单点和集群。思路还是比较简单的，就是要注意有些操作需要原子操作(考虑的真多啊，比如有死机，gc等情况)。  未完待续  老高给你出的题(加分题)  SSO 和 Oauth 都是什么？有什么不同？ RESTFUL 常用的请求方法，如何处理版本？常用的状态码？302和301的区别？ 你是通过什么途径获取新的知识的？ 用过视频转码的工具吗？ 你做过爬虫吗？简单的描述一款爬虫框架？ 你的职业规划是什么？  后记 从这次面试下来，老高的感触确实很多，首先就是觉得自己的技能还有很高的提升空间，至于如何弥补和大佬们的差距呢？老高觉得要从下面几点入手：\n 阅读经典，读的书不在多，在于精，读完能消化才能算真正的读书，以往老高读书的目的性太强，哪里不会读哪里，哪里有意思读哪里，虽然也看了不少技术书籍，其实真正能消化的不多。之后老高会在博客中记录读书笔记，欢迎阅读！ 要有大局观，提升自己的抽象能力。这种能力书本里是学不到的，需要自己培养和积累。举个例子，知乎上有一个问题，问为啥核武器为什么能形成威慑力，答主用宿舍间的裸照做类比，生动形象的表达出了核武器国家之间的矛与盾，真的是很佩服！ 阅读大型项目，比如从redis，disque(redis作者重新实现的队列，估计下个版本要合并到redis)，beanstalk等简单的项目看起，这些常用的软件看似简单，但是却隐藏了很大的智慧在其中，不学习一遍真的是很遗憾！   最后老高想说的是，真没想到这次面试能够如此多的收获，在此与君共勉！\n","wordCount":"170","inLanguage":"en","datePublished":"2018-11-29T14:17:00Z","dateModified":"2018-11-29T14:17:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://phpgao.github.io/2018_new_start.html"},"publisher":{"@type":"Organization","name":"老高的技术博客","logo":{"@type":"ImageObject","url":"https://phpgao.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://phpgao.github.io/ accesskey=h title="老高的博客 (Alt + H)">老高的博客</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://phpgao.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://phpgao.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://blog.phpgao.com title="old blog"><span>old blog</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://phpgao.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://phpgao.github.io/posts/>Posts</a></div><h1 class=post-title>2018面试总结</h1><div class=post-meta>November 29, 2018&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/2018-11-29_2018_new_start.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p><img loading=lazy src=https://blog.phpgao.com/usr/uploads/2018/11/3936467250.jpg alt=程序猿面试></p><p>找新工作的念头是在今年6月开始萌发的，其实当时已经开始投简历了，结果因为种种原因(主要是忙?)拖到这会儿才真正开始面试。投简历的平台是boss直聘，简历用的jobDeer的模板，用md写好，生成pdf和doc格式，挂在自己的网站下，方便下载和浏览。</p><h2 id=现状>现状<a hidden class=anchor aria-hidden=true href=#现状>#</a></h2><p>从上周开始疯狂投简历，目前收到了ABCDE公司的面试邀请，并且已经拿到了2个OFFER。目前还在等2家公司的面试，但愿到时候能正常发挥吧！</p><h2 id=感悟>感悟<a hidden class=anchor aria-hidden=true href=#感悟>#</a></h2><p>企业面试主要是考察面试者的能力，编码能力固然重要，但是也请不要忽略沟通交流能力的重要性，即获取信息和表达信息的能力，类似代码里的<code>get()</code>和<code>echo()</code>一样，能够准确的获取对方想要表达的重点(key)，并且能够用最简单的言语或者图形表达出自己string，自然是极好的！</p><p>当然，扎实的编码能力也是不能丢下的，大到能够规划一个网站的架构，小到用js写一段ajax请求，都需要自己一点一点的学习和积累。这里老高给做技术的同学们一个建议，最好有自己的独立博客，不论是用gayhub，还是自己买服务器，最差也要在CSDN开一个账户，写一写自己的开发中遇到的问题以及解决方案，或者自己对一些东西的研究，日积月累下来肯定会自己有很大的提升，不论是表达能力还是编码能力，同时你的文章也可能帮助到大家，这种一箭双雕的事情真的可以搞一搞！</p><p>最后，从反面出发，要意识到自己的不足，从而针对自己的不足进行强化。</p><h2 id=面试题>面试题<a hidden class=anchor aria-hidden=true href=#面试题>#</a></h2><p>由于老高记性不太好，所以赶紧把自己能够回想起来的面试题复盘一下，给PHPer后来面试的时候有一个参考！简单的回答我会写，复杂的慢慢补。一时间答不上来赶紧自己Google之。</p><blockquote><p>ps. 基本的PHP用法一定要掌握！从INI配置到PHP面向对象的用法，不能说完全掌握，最起码见到一个概念能够说出来个123。</p></blockquote><blockquote><p>pps.Linux的技能水平也不能落下，连LAMP都没玩过，谁给你的勇气去面试？</p></blockquote><p>下面试题不分先后顺序，老高想到哪儿写到哪儿！</p><ul><li>composer都解决了什么问题？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>依赖
</code></pre></div><ul><li>tcp长连接如何保活？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>重试
心跳
</code></pre></div><ul><li>php如何接受二进制数据？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>php://input

$GLOBALS[&#39;HTTP_RAW_POST_DATA&#39;]

</code></pre></div><ul><li>分布式系统如何追踪请求？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>Google Dapper
</code></pre></div><ul><li>微服务之间如何保证数据一致性？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>可靠事件
对账
TCC（Try-Confirm-Cancel）
</code></pre></div><ul><li>PHP如何实时生成Excel并下载？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=color:#75715e># 大数据量最好使用id去分段，并且设置合理的导出超时时间
</span><span style=color:#75715e></span>$fp <span style=color:#f92672>=</span> <span style=color:#a6e22e>fopen</span>(<span style=color:#e6db74>&#39;php://output&#39;</span>, <span style=color:#e6db74>&#39;a&#39;</span>);
<span style=color:#a6e22e>fputs</span>($fp, <span style=color:#e6db74>&#39;strings&#39;</span>);
<span style=color:#f92672>....</span>
<span style=color:#a6e22e>fclose</span>($fp)
</code></pre></div><ul><li>分表的策略？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>垂直和水平
取模
hash(crc32)
一致性hash
</code></pre></div><ul><li>php提高文件发送性能？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>x-sendfile
</code></pre></div><ul><li>nginx和apache的不同？nginx高性能体现在哪儿？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>点有很多
apache每个事件消费者独占一个进程资源，nginx只是被事件分发者进程短期调用而已。
</code></pre></div><ul><li>nginx如何解决惊群？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>同一时间只有一个work进程监听请求，使用锁实现
</code></pre></div><ul><li>CAP原则？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>CAP原则又称CAP定理，指的是在一个分布式系统中， Consistency（一致性）、 Availability（可用性）、Partition tolerance（分区容错性），三者不可兼得。
</code></pre></div><ul><li>PG 和 Mysql的对比？</li></ul><p><a href=https://www.zhihu.com/question/20010554>PostgreSQL 与 MySQL 相比，优势何在？</a></p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>很多，SQL标准的支持，更多的字段，jsonb(json的各种骚操作，建索引，Nosql)，性能抖动低，商业友好。

不好分区，有真空操作影响性能，没有MySQL流行 
</code></pre></div><ul><li>PHP的劣势？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>对比Golang，非静态语言，需要编译(JIT有一定的缓解)，包的概念推出较晚。
</code></pre></div><ul><li>PHP垃圾回收机制？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>初期采用引用计数法，5.3后引入根缓存区，主要解决了循环引用，让内存溢出保持在一个范围内。
</code></pre></div><ul><li>如何解决ajax跨域？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>jsonp
服务器响应头Access-Control-Allow-Origin
iframe
</code></pre></div><ul><li>PHP如何获取客户端IP？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>从`$_SERVER`中获取，REMOTE_ADDR和HTTP_X_FORWARDED_FOR，需要区分有没有使用代理
</code></pre></div><ul><li>redis排行榜怎么使用？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback># sorted set，步骤
# 添加分数
ZADD key score1 member1 [score2 member2]
# 查询排名
zrevrank key user3
# 获取所有
zrevrange key 0 -1 withscores
</code></pre></div><ul><li>nginx负载均衡怎么做？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>添加upstream
用语法proxy-pass指向这个upstream
nginx的负载均衡有4种模式：

1)、轮询（默认） 
每个请求按时间顺序逐一分配到不同的后端服务器，如果后端服务器down掉，能自动剔除。 
2)、weight 
指定轮询几率，weight和访问比率成正比，用于后端服务器性能不均的情况。 
2)、ip_hash 
每个请求按访问ip的hash结果分配，这样每个访客固定访问一个后端服务器，可以解决session的问题。 
3)、fair（第三方） 
按后端服务器的响应时间来分配请求，响应时间短的优先分配。 
4)、url_hash（第三方）
</code></pre></div><ul><li>MySQL优化步骤？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>- 优化字段类型，优化sql，索引和慢查询(针对存储引擎优化)
- 适当的做一些冗余(可选)
- 加入缓存，减轻DB压力
- 加入读写分离，用中间件或者在代码层处理
- 预估数据增量和读写比，准备合适的分表策略
- 垂直业务拆分
- 水平分表
</code></pre></div><ul><li>解决脏读、不可重复读、幻读的办法？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>主要考察事务的隔离级别，
READ_UNCOMMITTED
READ_COMMITTED
REPEATABLE READ
SERIALIZABLE
并发性能递减
</code></pre></div><ul><li>悲观锁，乐观锁？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>悲观锁也就是排它锁，for update，注意表锁和行锁。
乐观锁加入了版本管理的概念，
update table set x=x+1, version=version+1 where id=#{id} and version=#{version};
</code></pre></div><ul><li>简单的抽奖？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>我的思路是把预先奖品放到redis的队列中。
</code></pre></div><ul><li>redis的分布式锁？</li></ul><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>参考很有名的Redlock，分为单点和集群。思路还是比较简单的，就是要注意有些操作需要原子操作(考虑的真多啊，比如有死机，gc等情况)。
</code></pre></div><ul><li>未完待续</li></ul><h3 id=老高给你出的题加分题>老高给你出的题(加分题)<a hidden class=anchor aria-hidden=true href=#老高给你出的题加分题>#</a></h3><ul><li>SSO 和 Oauth 都是什么？有什么不同？</li><li>RESTFUL 常用的请求方法，如何处理版本？常用的状态码？302和301的区别？</li><li>你是通过什么途径获取新的知识的？</li><li>用过视频转码的工具吗？</li><li>你做过爬虫吗？简单的描述一款爬虫框架？</li><li>你的职业规划是什么？</li></ul><h2 id=后记>后记<a hidden class=anchor aria-hidden=true href=#后记>#</a></h2><p>从这次面试下来，老高的感触确实很多，首先就是觉得自己的技能还有<code>很高的提升空间</code>，至于如何弥补和大佬们的差距呢？老高觉得要从下面几点入手：</p><ul><li>阅读经典，读的书不在多，在于精，读完能消化才能算真正的读书，以往老高读书的目的性太强，哪里不会读哪里，哪里有意思读哪里，虽然也看了不少技术书籍，其实真正能消化的不多。之后老高会在博客中记录读书笔记，欢迎阅读！</li><li>要有大局观，提升自己的抽象能力。这种能力书本里是学不到的，需要自己培养和积累。举个例子，知乎上有一个问题，问为啥核武器为什么能形成威慑力，答主用宿舍间的裸照做类比，生动形象的表达出了核武器国家之间的矛与盾，真的是很佩服！</li><li>阅读大型项目，比如从redis，disque(redis作者重新实现的队列，估计下个版本要合并到redis)，beanstalk等简单的项目看起，这些常用的软件看似简单，但是却隐藏了很大的智慧在其中，不学习一遍真的是很遗憾！</li></ul><blockquote><p>最后老高想说的是，真没想到这次面试能够如此多的收获，在此与君共勉！</p></blockquote></div><footer class=post-footer><ul class=post-tags><li><a href=https://phpgao.github.io/tags/%E9%9D%A2%E8%AF%95/>面试</a></li></ul><nav class=paginav><a class=prev href=https://phpgao.github.io/nginxconfig.html><span class=title>« Prev Page</span><br><span>V2上看到一个很棒的网站-nginxconfig.io</span></a>
<a class=next href=https://phpgao.github.io/acme.html><span class=title>Next Page »</span><br><span>使用Acme工具配置Let's-Encrypt通配符HTTPS证书</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://phpgao.github.io/>老高的技术博客</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>