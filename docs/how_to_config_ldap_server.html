<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>如何使用openldap搭建LDAP服务篇1--初见LDAP | 老高的技术博客</title><meta name=keywords content="centos,Linux,ldap"><meta name=description content="LDAP是轻量目录访问协议，这个服务从老高进入360就一直在用，LDAP带来的好处真的是很多，你可以把它想象成为一个内网版的单点登录服务，可以让你使用同一组账户密码访问所有支持LDAP验证的系统，为企业的内部运维带来了极大的便利。
不过想要自己独立搭建一个LDAP服务还是挺麻烦的！不过一旦搭建好了LDAP服务器，剩下的管理和运维就简单多了。"><meta name=author content="Me"><link rel=canonical href=https://phpgao.github.io/how_to_config_ldap_server.html><link crossorigin=anonymous href=/assets/css/stylesheet.min.1a6ee89730e13a801d0f34e0cb5b98e96cf8c65b80500638bd599fc224ed8442.css integrity="sha256-Gm7olzDhOoAdDzTgy1uY6Wz4xluAUAY4vVmfwiTthEI=" rel="preload stylesheet" as=style><link rel=preload href="https://cdn.v2ex.com/gravatar/2b66f45a3e2f41db6522381006bfaea1?s=192" as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://phpgao.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://phpgao.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://phpgao.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://phpgao.github.io/apple-touch-icon.png><link rel=mask-icon href=https://phpgao.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.83.1"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-39288145-2','auto'),ga('send','pageview'))</script><meta property="og:title" content="如何使用openldap搭建LDAP服务篇1--初见LDAP"><meta property="og:description" content="LDAP是轻量目录访问协议，这个服务从老高进入360就一直在用，LDAP带来的好处真的是很多，你可以把它想象成为一个内网版的单点登录服务，可以让你使用同一组账户密码访问所有支持LDAP验证的系统，为企业的内部运维带来了极大的便利。
不过想要自己独立搭建一个LDAP服务还是挺麻烦的！不过一旦搭建好了LDAP服务器，剩下的管理和运维就简单多了。"><meta property="og:type" content="article"><meta property="og:url" content="https://phpgao.github.io/how_to_config_ldap_server.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-12-22T09:13:00+00:00"><meta property="article:modified_time" content="2018-12-22T09:13:00+00:00"><meta property="og:site_name" content="老高的技术博客"><meta name=twitter:card content="summary"><meta name=twitter:title content="如何使用openldap搭建LDAP服务篇1--初见LDAP"><meta name=twitter:description content="LDAP是轻量目录访问协议，这个服务从老高进入360就一直在用，LDAP带来的好处真的是很多，你可以把它想象成为一个内网版的单点登录服务，可以让你使用同一组账户密码访问所有支持LDAP验证的系统，为企业的内部运维带来了极大的便利。
不过想要自己独立搭建一个LDAP服务还是挺麻烦的！不过一旦搭建好了LDAP服务器，剩下的管理和运维就简单多了。"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://phpgao.github.io/posts/"},{"@type":"ListItem","position":2,"name":"如何使用openldap搭建LDAP服务篇1--初见LDAP","item":"https://phpgao.github.io/how_to_config_ldap_server.html"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"如何使用openldap搭建LDAP服务篇1--初见LDAP","name":"如何使用openldap搭建LDAP服务篇1--初见LDAP","description":"LDAP是轻量目录访问协议，这个服务从老高进入360就一直在用，LDAP带来的好处真的是很多，你可以把它想象成为一个内网版的单点登录服务，可以让你使用同一组账户密码访问所有支持LDAP验证的系统，为企业的内部运维带来了极大的便利。\n不过想要自己独立搭建一个LDAP服务还是挺麻烦的！不过一旦搭建好了LDAP服务器，剩下的管理和运维就简单多了。\n","keywords":["centos","Linux","ldap"],"articleBody":"LDAP是轻量目录访问协议，这个服务从老高进入360就一直在用，LDAP带来的好处真的是很多，你可以把它想象成为一个内网版的单点登录服务，可以让你使用同一组账户密码访问所有支持LDAP验证的系统，为企业的内部运维带来了极大的便利。\n不过想要自己独立搭建一个LDAP服务还是挺麻烦的！不过一旦搭建好了LDAP服务器，剩下的管理和运维就简单多了。\n在搭建LDAP服务器前，我们必须需要了解一些LDAP的基本概念。\nWhat is LDAP Lightweight Directory Access Protocol，轻量目录访问协议，他是基于 X.500(目录访问协议)的DAP发展过来的，与LDAP一样提供类似的目录服务软件还有ApacheDS、Active Directory、Red Hat Directory Service。\n X.500 是 ISO 制定的一套目录服务的标准，它是一个协议族，定义了一个机构如何在全局范围内共享名称和与名称相关联的对象。通过它，可以将局部的目录服务连接起来，构建基于 Internet 的分布在全球的目录服务系统……而目录访问协议（DAP）是 X.500 的核心组成之一。\n LDAP的特点  LDAP基于TCP/IP LDAP的结构用树来表示 LDAP读快写慢 Client/server模型，Server 用于存储数据，Client提供操作目录信息树的工具，LDIF格式 LDAP是一种开放Internet标准，LDAP协议是跨平台的Interent协议  LDAP一些概念 目录树概念  目录树：在一个目录服务系统中，整个目录信息集可以表示为一个目录信息树，树中的每个节点是一个条目。 条目：每个条目就是一条记录，每个条目有自己的唯一可区别的名称（DN）。有点类似URI，可以通过一个路径确定唯一一个对象。 对象类：与某个实体类型对应的一组属性，对象类是可以继承的，这样父类的必须属性也会被继承下来。 属性：描述条目的某个方面的信息，一个属性由一个属性类型和一个或多个属性值组成，属性有必须属性和非必须属性。  关键字缩写    关键字 英文全称 含义     Entry - 条目，也叫记录项，是LDAP中最基本的颗粒，就像字典中的词条，或者是数据库中的记录。通常对LDAP的添加、删除、更改、检索都是以条目为基本对象的。   Attribute - 每个条目都可以有很多属性（Attribute），比如常见的人都有姓名、地址、电话等属性。每个属性都有名称及对应的值，属性值可以有单个、多个，比如你有多个邮箱。   ObjectClass - 对象类是属性的集合，LDAP预想了很多人员组织机构中常见的对象，并将其封装成对象类。比如人员（person）含有姓（sn）、名（cn）、电话(telephoneNumber)、密码(userPassword)等属性，单位职工(organizationalPerson)是人员(person)的继承类，除了上述属性之外还含有职务（title）、邮政编码（postalCode）、通信地址(postalAddress)等属性。   Schema - 对象类（ObjectClass）、属性类型（AttributeType）、语法（Syntax）分别约定了条目、属性、值，他们之间的关系如下图所示。所以这些构成了模式(Schema)——对象类的集合。条目数据在导入时通常需要接受模式检查，它确保了目录中所有的条目数据结构都是一致的。一般存放路径为/etc/openldap/schema，一个条目的属性必须存在于已定义的schema中   LDIF LDAP Data Interchange Format LDIF 是一种普遍使用的文件格式，用来描述目录信息或可对目录执行的修改操作。   dc Domain Component 域名的部分，其格式是将完整的域名分成几部分，如域名为example.com变成dc=example,dc=com（一条记录的所属位置）   uid User Id 用户ID songtao.xu（一条记录的ID）   ou Organization Unit 组织单位，组织单位可以包含其他各种对象（包括其他组织单元），如“oa组”（一条记录的所属组织）   cn Common Name 公共名称，如“Thomas Johansson”（一条记录的名称）   sn Surname 姓，如“许”   dn Distinguished Name “uid=songtao.xu,ou=oa组,dc=example,dc=com”，一条记录的位置（唯一）   rdn Relative dn 相对辨别名，类似于文件系统中的相对路径，它是与目录树结构无关的部分，如“uid=tom”或“cn= Thomas Johansson”    简单的例子 请先观察老高画的图，老高预先给出几个dn，看看你能不能总结出出什么规律！ dn:dc=360,dc=Net dn:ou=Tech,dc=360,dc=Net dn:uid=phpgao,ou=Web,ou=Tech,dc=360,dc=net\n+-------------+ | | | dc=Net 首先，dn的写法是从下向上，用逗号间隔； 其次，dn是唯一的，否则就没法确定一条entry了； 最后，rdn就是dn最左边的entry。\n查看配置文件 schema文件 以/etc/openldap/schema/nis.schema文件为例，我们可以发现，objectclass posixAccount 有以下定义：\n# Object Class Definitions objectclass ( 1.3.6.1.1.1.2.0 NAME 'posixAccount' DESC 'Abstraction of an account with POSIX attributes' SUP top AUXILIARY MUST ( cn $ uid $ uidNumber $ gidNumber $ homeDirectory ) MAY ( userPassword $ loginShell $ gecos $ description ) ) 我们关注的是MUST中和MAY中的字段，以uidNumber和userPassword()为例，我们可以在文件的Attribute Type Definitions节中发现以下定义：\n# builtin #attributetype ( 1.3.6.1.1.1.1.0 NAME 'uidNumber' #\tDESC 'An integer uniquely identifying a user in an administrative domain' #\tEQUALITY integerMatch #\tSYNTAX 1.3.6.1.4.1.1466.115.121.1.27 SINGLE-VALUE ) attributetype ( 2.5.4.35 NAME 'userPassword' EQUALITY octetStringMatch SYNTAX 1.3.6.1.4.1.1466.115.121.1.40{128} ) 安装LDAP(Centos7) 废话不多说，我们先安装好openldap，等下一篇老高来讲讲配置的方法。\n安装LDAP服务端 yum install openldap-servers # 启动服务 systemctl start slapd systemctl status slapd # 查看版本 slapd -V  OpenLDAP: slapd 2.4.44 安装LDAP客户端工具 首先，配置好一个新的LDAP服务器后，老高建议优先使用一个GUI工具配置，在此老高推荐使用Apache Directory Studio，支持多平台配置。\n当然，你也可以用命令行管理\nyum install openldap-clients # 查看工具 ls -al /usr/bin/ |grep ldap ldapadd ldapcompare ldapdelete ldapexop ldapmodify ldapmodrdn ldappasswd ldapsearch ldapurl ldapwhoami 管理工具 phpLDAPadmin Self Service Password JXplorer\nRefer:\n http://www.openldap.org/doc/admin24/ https://ldapwiki.com/wiki/Main http://www.zytrax.com/books/ldap/apd/index.html http://www.zytrax.com/books/ldap/ch3/ http://www.zytrax.com/books/ldap/ch2/ https://www.cnblogs.com/wilburxu/p/9174353.html https://www.adimian.com/blog/2014/10/how-to-enable-memberof-using-openldap/ http://seanlook.com/2015/01/15/openldap_introduction/ https://www.itzgeek.com/how-tos/linux/centos-how-tos/step-step-openldap-server-configuration-centos-7-rhel-7.html https://linuxhostsupport.com/blog/how-to-install-ldap-on-centos-7/ https://www.ibm.com/developerworks/cn/linux/l-openldap/index.html https://www.digitalocean.com/community/tutorials/how-to-change-account-passwords-on-an-openldap-server https://segmentfault.com/a/1190000014683418 ","wordCount":"365","inLanguage":"en","datePublished":"2018-12-22T09:13:00Z","dateModified":"2018-12-22T09:13:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://phpgao.github.io/how_to_config_ldap_server.html"},"publisher":{"@type":"Organization","name":"老高的技术博客","logo":{"@type":"ImageObject","url":"https://phpgao.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://phpgao.github.io/ accesskey=h title="老高的博客 (Alt + H)">老高的博客</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://phpgao.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://phpgao.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://blog.phpgao.com title="old blog"><span>old blog</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://phpgao.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://phpgao.github.io/posts/>Posts</a></div><h1 class=post-title>如何使用openldap搭建LDAP服务篇1--初见LDAP</h1><div class=post-meta>December 22, 2018&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/2018-12-22_how_to_config_ldap_server.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>LDAP是轻量目录访问协议，这个服务从老高进入360就一直在用，LDAP带来的好处真的是很多，你可以把它想象成为一个内网版的单点登录服务，可以让你使用同一组账户密码访问所有支持LDAP验证的系统，为企业的内部运维带来了极大的便利。</p><p>不过想要自己独立搭建一个LDAP服务还是挺麻烦的！不过一旦搭建好了LDAP服务器，剩下的管理和运维就简单多了。</p><p>在搭建LDAP服务器前，我们必须需要了解一些LDAP的基本概念。</p><h2 id=what-is-ldap>What is LDAP<a hidden class=anchor aria-hidden=true href=#what-is-ldap>#</a></h2><p>Lightweight Directory Access Protocol，轻量目录访问协议，他是基于 X.500(目录访问协议)的DAP发展过来的，与LDAP一样提供类似的目录服务软件还有ApacheDS、Active Directory、Red Hat Directory Service。</p><blockquote><p>X.500 是 ISO 制定的一套目录服务的标准，它是一个协议族，定义了一个机构如何在全局范围内共享名称和与名称相关联的对象。通过它，可以将局部的目录服务连接起来，构建基于 Internet 的分布在全球的目录服务系统……而目录访问协议（DAP）是 X.500 的核心组成之一。</p></blockquote><h3 id=ldap的特点>LDAP的特点<a hidden class=anchor aria-hidden=true href=#ldap的特点>#</a></h3><ul><li>LDAP基于TCP/IP</li><li>LDAP的结构用树来表示</li><li>LDAP读快写慢</li><li>Client/server模型，Server 用于存储数据，Client提供操作目录信息树的工具，LDIF格式</li><li>LDAP是一种开放Internet标准，LDAP协议是跨平台的Interent协议</li></ul><h3 id=ldap一些概念>LDAP一些概念<a hidden class=anchor aria-hidden=true href=#ldap一些概念>#</a></h3><h4 id=目录树概念>目录树概念<a hidden class=anchor aria-hidden=true href=#目录树概念>#</a></h4><ol><li>目录树：在一个目录服务系统中，整个目录信息集可以表示为一个目录信息树，树中的每个节点是一个条目。</li><li>条目：每个条目就是一条记录，每个条目有自己的唯一可区别的名称（<strong>DN</strong>）。有点类似URI，可以通过一个路径确定唯一一个对象。</li><li>对象类：与某个实体类型对应的一组属性，对象类是可以继承的，这样父类的必须属性也会被继承下来。</li><li>属性：描述条目的某个方面的信息，一个属性由一个属性类型和一个或多个属性值组成，属性有必须属性和非必须属性。</li></ol><h4 id=关键字缩写>关键字缩写<a hidden class=anchor aria-hidden=true href=#关键字缩写>#</a></h4><table><thead><tr><th>关键字</th><th>英文全称</th><th>含义</th></tr></thead><tbody><tr><td>Entry</td><td>-</td><td>条目，也叫记录项，是LDAP中最基本的颗粒，就像字典中的词条，或者是数据库中的记录。通常对LDAP的添加、删除、更改、检索都是以条目为基本对象的。</td></tr><tr><td>Attribute</td><td>-</td><td>每个条目都可以有很多属性（Attribute），比如常见的人都有姓名、地址、电话等属性。每个属性都有名称及对应的值，属性值可以有单个、多个，比如你有多个邮箱。</td></tr><tr><td>ObjectClass</td><td>-</td><td>对象类是属性的集合，LDAP预想了很多人员组织机构中常见的对象，并将其封装成对象类。比如人员（person）含有姓（sn）、名（cn）、电话(telephoneNumber)、密码(userPassword)等属性，单位职工(organizationalPerson)是人员(person)的继承类，除了上述属性之外还含有职务（title）、邮政编码（postalCode）、通信地址(postalAddress)等属性。</td></tr><tr><td>Schema</td><td>-</td><td>对象类（ObjectClass）、属性类型（AttributeType）、语法（Syntax）分别约定了条目、属性、值，他们之间的关系如下图所示。所以这些构成了模式(Schema)——对象类的集合。条目数据在导入时通常需要接受模式检查，它确保了目录中所有的条目数据结构都是一致的。一般存放路径为<code>/etc/openldap/schema</code>，一个条目的属性必须存在于已定义的schema中</td></tr><tr><td>LDIF</td><td>LDAP Data Interchange Format</td><td>LDIF 是一种普遍使用的文件格式，用来描述目录信息或可对目录执行的修改操作。</td></tr><tr><td>dc</td><td>Domain Component</td><td>域名的部分，其格式是将完整的域名分成几部分，如域名为example.com变成dc=example,dc=com（一条记录的所属位置）</td></tr><tr><td>uid</td><td>User Id</td><td>用户ID songtao.xu（一条记录的ID）</td></tr><tr><td>ou</td><td>Organization Unit</td><td>组织单位，组织单位可以包含其他各种对象（包括其他组织单元），如“oa组”（一条记录的所属组织）</td></tr><tr><td>cn</td><td>Common Name</td><td>公共名称，如“Thomas Johansson”（一条记录的名称）</td></tr><tr><td>sn</td><td>Surname</td><td>姓，如“许”</td></tr><tr><td>dn</td><td>Distinguished Name</td><td>“uid=songtao.xu,ou=oa组,dc=example,dc=com”，一条记录的位置（唯一）</td></tr><tr><td>rdn</td><td>Relative dn</td><td>相对辨别名，类似于文件系统中的相对路径，它是与目录树结构无关的部分，如“uid=tom”或“cn= Thomas Johansson”</td></tr></tbody></table><h4 id=简单的例子>简单的例子<a hidden class=anchor aria-hidden=true href=#简单的例子>#</a></h4><p>请先观察老高画的图，老高预先给出几个dn，看看你能不能总结出出什么规律！
dn:dc=360,dc=Net
dn:ou=Tech,dc=360,dc=Net
dn:uid=phpgao,ou=Web,ou=Tech,dc=360,dc=net</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>
                 +-------------+
                 |             |
                 |    dc=Net   &lt;---+ 顶 级 域 名
                 |             |
                 +------+------+
                        |
                        |
                 +------v------+
                 |             &lt;---------+下 一 级 域 名
                 |    dc=360   +-----------+
                 |             |           |
                 +-----+-------+           |
                       |                   |
                       |                   |
                 +-----v------+      +-----v------+
                 |            |      |            |
      +----------+   ou=Tech  |      | ou=Finance &lt;-----+ 组 织
      |          |            |      |            |
      |          +------+-----+      +-----+------+
      |                 |                  |
      |                 |                  |
+-----v-----+    +------v-----+      +-----v------+
|           |    |            |      |            |
|   ou=Web  |    |    ou=App  |      |  uid=cfo   &lt;-----+ 对 象
|           |    |            |      |            |
+-----+-----+    +------+-----+      +------------+
      |                 |
      |                 |
+-----v-----+    +------v-----+
|           |    |            |
| uid=phpgao|    |   uid=dev  |
|           |    |            |
+-----------+    +------------+


</code></pre></div><p>首先，dn的写法是从下向上，用逗号间隔；
其次，dn是唯一的，否则就没法确定一条entry了；
最后，rdn就是dn最左边的entry。</p><h4 id=查看配置文件>查看配置文件<a hidden class=anchor aria-hidden=true href=#查看配置文件>#</a></h4><h5 id=schema文件>schema文件<a hidden class=anchor aria-hidden=true href=#schema文件>#</a></h5><p>以<code>/etc/openldap/schema/nis.schema</code>文件为例，我们可以发现，objectclass <strong>posixAccount</strong> 有以下定义：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback># Object Class Definitions

objectclass ( 1.3.6.1.1.1.2.0 NAME &#39;posixAccount&#39;
	DESC &#39;Abstraction of an account with POSIX attributes&#39;
	SUP top AUXILIARY
	MUST ( cn $ uid $ uidNumber $ gidNumber $ homeDirectory )
	MAY ( userPassword $ loginShell $ gecos $ description ) )
</code></pre></div><p>我们关注的是MUST中和MAY中的字段，以uidNumber和userPassword()为例，我们可以在文件的<code>Attribute Type Definitions</code>节中发现以下定义：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback># builtin
#attributetype ( 1.3.6.1.1.1.1.0 NAME &#39;uidNumber&#39;
#	DESC &#39;An integer uniquely identifying a user in an administrative domain&#39;
#	EQUALITY integerMatch
#	SYNTAX 1.3.6.1.4.1.1466.115.121.1.27 SINGLE-VALUE )


attributetype ( 2.5.4.35 NAME &#39;userPassword&#39;
	EQUALITY octetStringMatch
	SYNTAX 1.3.6.1.4.1.1466.115.121.1.40{128} )
</code></pre></div><h2 id=安装ldapcentos7>安装LDAP(Centos7)<a hidden class=anchor aria-hidden=true href=#安装ldapcentos7>#</a></h2><p>废话不多说，我们先安装好openldap，等下一篇老高来讲讲配置的方法。</p><h3 id=安装ldap服务端>安装LDAP服务端<a hidden class=anchor aria-hidden=true href=#安装ldap服务端>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>yum install openldap-servers

# 启动服务

systemctl start slapd
systemctl status slapd

# 查看版本
slapd -V

&gt; OpenLDAP: slapd 2.4.44
</code></pre></div><h3 id=安装ldap客户端工具>安装LDAP客户端工具<a hidden class=anchor aria-hidden=true href=#安装ldap客户端工具>#</a></h3><p>首先，配置好一个新的LDAP服务器后，老高建议优先使用一个GUI工具配置，在此老高推荐使用<a href=https://directory.apache.org/studio/downloads.html>Apache Directory Studio</a>，支持多平台配置。</p><p>当然，你也可以用命令行管理</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>yum install openldap-clients

# 查看工具
ls -al /usr/bin/ |grep  ldap

ldapadd
ldapcompare
ldapdelete
ldapexop
ldapmodify
ldapmodrdn
ldappasswd
ldapsearch
ldapurl
ldapwhoami
</code></pre></div><h2 id=管理工具>管理工具<a hidden class=anchor aria-hidden=true href=#管理工具>#</a></h2><p><a href=http://phpldapadmin.sourceforge.net/wiki/index.php/Main_Page>phpLDAPadmin</a>
<a href=https://ltb-project.org/documentation/self-service-password>Self Service Password</a>
<a href=http://jxplorer.org/>JXplorer</a></p><p>Refer:</p><ul><li><a href=http://www.openldap.org/doc/admin24/>http://www.openldap.org/doc/admin24/</a></li><li><a href=https://ldapwiki.com/wiki/Main>https://ldapwiki.com/wiki/Main</a></li><li><a href=http://www.zytrax.com/books/ldap/apd/index.html>http://www.zytrax.com/books/ldap/apd/index.html</a></li><li><a href=http://www.zytrax.com/books/ldap/ch3/>http://www.zytrax.com/books/ldap/ch3/</a></li><li><a href=http://www.zytrax.com/books/ldap/ch2/>http://www.zytrax.com/books/ldap/ch2/</a></li><li><a href=https://www.cnblogs.com/wilburxu/p/9174353.html>https://www.cnblogs.com/wilburxu/p/9174353.html</a></li><li><a href=https://www.adimian.com/blog/2014/10/how-to-enable-memberof-using-openldap/>https://www.adimian.com/blog/2014/10/how-to-enable-memberof-using-openldap/</a></li><li><a href=http://seanlook.com/2015/01/15/openldap_introduction/>http://seanlook.com/2015/01/15/openldap_introduction/</a></li><li><a href=https://www.itzgeek.com/how-tos/linux/centos-how-tos/step-step-openldap-server-configuration-centos-7-rhel-7.html>https://www.itzgeek.com/how-tos/linux/centos-how-tos/step-step-openldap-server-configuration-centos-7-rhel-7.html</a></li><li><a href=https://linuxhostsupport.com/blog/how-to-install-ldap-on-centos-7/>https://linuxhostsupport.com/blog/how-to-install-ldap-on-centos-7/</a></li><li><a href=https://www.ibm.com/developerworks/cn/linux/l-openldap/index.html>https://www.ibm.com/developerworks/cn/linux/l-openldap/index.html</a></li><li><a href=https://www.digitalocean.com/community/tutorials/how-to-change-account-passwords-on-an-openldap-server>https://www.digitalocean.com/community/tutorials/how-to-change-account-passwords-on-an-openldap-server</a></li><li><a href=https://segmentfault.com/a/1190000014683418>https://segmentfault.com/a/1190000014683418</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://phpgao.github.io/tags/centos/>centos</a></li><li><a href=https://phpgao.github.io/tags/linux/>Linux</a></li><li><a href=https://phpgao.github.io/tags/ldap/>ldap</a></li></ul><nav class=paginav><a class=prev href=https://phpgao.github.io/go_system_cons.html><span class=title>« Prev Page</span><br><span>golang预定义的系统名称</span></a>
<a class=next href=https://phpgao.github.io/nignx_empty_host.html><span class=title>Next Page »</span><br><span>修复nginx空主机头的问题</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://phpgao.github.io/>老高的技术博客</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>