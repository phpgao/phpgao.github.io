<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>nginx | 老高的技术博客</title><meta name=keywords content><meta name=description content="记录和分享，与你每天进步一点点。"><meta name=author content="Me"><link rel=canonical href=https://phpgao.github.io/tags/nginx/><link crossorigin=anonymous href=/assets/css/stylesheet.min.1a6ee89730e13a801d0f34e0cb5b98e96cf8c65b80500638bd599fc224ed8442.css integrity="sha256-Gm7olzDhOoAdDzTgy1uY6Wz4xluAUAY4vVmfwiTthEI=" rel="preload stylesheet" as=style><link rel=preload href="https://cdn.v2ex.com/gravatar/2b66f45a3e2f41db6522381006bfaea1?s=192" as=image><link rel=icon href=https://phpgao.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://phpgao.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://phpgao.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://phpgao.github.io/apple-touch-icon.png><link rel=mask-icon href=https://phpgao.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.83.1"><link rel=alternate type=application/rss+xml href=https://phpgao.github.io/tags/nginx/index.xml><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-39288145-2','auto'),ga('send','pageview'))</script><meta property="og:title" content="nginx"><meta property="og:description" content="记录和分享，与你每天进步一点点。"><meta property="og:type" content="website"><meta property="og:url" content="https://phpgao.github.io/tags/nginx/"><meta property="og:site_name" content="老高的技术博客"><meta name=twitter:card content="summary"><meta name=twitter:title content="nginx"><meta name=twitter:description content="记录和分享，与你每天进步一点点。"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://phpgao.github.io/ accesskey=h title="老高的博客 (Alt + H)">老高的博客</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://phpgao.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://phpgao.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://blog.phpgao.com title="old blog"><span>old blog</span></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://phpgao.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://phpgao.github.io/tags/>Tags</a></div><h1>nginx</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2>删除nginx-fastcgi-cache缓存</h2></header><section class=entry-content><p>老高通过nginx的优化配置，配置了fastcgi_cache，服务器使用缓存固然很好，但是也会遇到很尴尬的时候。
比如突然发现某个错别字，在后台改好后发现文章之前已被缓存，不知道还要等多久才能刷新，解决办法是删除生成的文件
但想要找到已经可不容易，有两个办法：
一个一个找或者直接删除全部缓存 根据nginx的URL – key的规则，再使用两层hash来定位文件 因为老高缓存的文件数不多，所以最后的解决办法是 – 关键字过滤
# 找 grep -r 'your keywords' . # 删 grep -rl 'your keywords' . |xargs rm 下面的也可以
find |xargs grep 'your keywords' find |xargs grep -l 'your keywords'|xargs rm 顺便记个笔记
# 顺便记一下find限定查找文件和目录 find -type f find -type d # grep --help 中-R也很有用！ grep -r --include="*.php"</p></section><footer class=entry-footer>May 20, 2015&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to 删除nginx-fastcgi-cache缓存" href=https://phpgao.github.io/nginx-fastcgi-cache-deletion.html></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>nginx编译安装ngx_lua模块</h2></header><section class=entry-content><p>nginx lua模块淘宝开发的nginx第三方模块,它能将lua语言嵌入到nginx配置中,从而使用lua就极大增强了nginx的能力.
...</p></section><footer class=entry-footer>May 19, 2015&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to nginx编译安装ngx_lua模块" href=https://phpgao.github.io/nginx_ngx_lua.html></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>nginx的优化配置</h2></header><section class=entry-content><p>老高的服务器最近表示亚历山大，先祭出此篇缓解前端压力，之后再从代码中优化一下。
...</p></section><footer class=entry-footer>May 19, 2015&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to nginx的优化配置" href=https://phpgao.github.io/nginx_optimization.html></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>使用nginx-+-uWSGI运行flask程序</h2></header><section class=entry-content><p>老高最近写了一个flask小应用，功能很简单，就是通过读取配置再显示ss的二维码配置，不过想让他运行起来统一管理，还是费了一些周折啊。
如果你自己Google过，你可能会发现一个关键字uWSGI，他就是本篇的主角。
名词解释
Web服务器网关接口（Python Web Server Gateway Interface，缩写为WSGI。 uwsgi与WSGI一样，是一个通信协议。 uWSGI，一个实现了WSGI，uwsgi，http等协议的服务器，与nginx在一个层次。
鉴于国内的一些教程都写成翔了，那老高就赶紧记录分享一下。
...</p></section><footer class=entry-footer>April 27, 2015&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to 使用nginx-+-uWSGI运行flask程序" href=https://phpgao.github.io/nginx_uwsgi_flask.html></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>centos6新系统初始化脚本</h2></header><section class=entry-content><p>最近装机次数有点多，本来想写到这里的centos6 优化脚本与安全脚本，结果一想还是新开一个帖子吧。
centos源设置可以参考Centos源设置，老高推荐安装阿里源。
新机子先运行上面的脚本，再运行这个脚本
...</p></section><footer class=entry-footer>April 27, 2015&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to centos6新系统初始化脚本" href=https://phpgao.github.io/new_cents_shell.html></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>使用nginx做反向代理</h2></header><section class=entry-content><p>很多同学喜欢用nginx做反向代理访问某些网站，原因大家都懂的，今天老高记录一下如何使用nginx做反向代理以及如何配置和优化nginx的反向代理。
...</p></section><footer class=entry-footer>April 12, 2015&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to 使用nginx做反向代理" href=https://phpgao.github.io/nginx_reverse_proxy.html></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>VPS重做系统都需要做什么</h2></header><section class=entry-content><p>重做系统都快成日常了，看来还是需要整理一下。
...</p></section><footer class=entry-footer>December 25, 2014&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to VPS重做系统都需要做什么" href=https://phpgao.github.io/vps_renew.html></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>安装编译nginx</h2></header><section class=entry-content><p>今天老高更新了一下nginx，顺便把nginx的安装编译过程记录一下，分享给大家！
一并送上之前老高的博文：
将nginx配置为服务
nginx配置详解
下载 官网下载地址：http://nginx.org/en/download.html
准备 安装nginx时必须先安装相应的编译工具
yum -y install gcc gcc-c++ autoconf automake yum -y install zlib zlib-devel openssl openssl-devel pcre-devel centos没有安装make编译器
yum -y install gcc automake autoconf libtool make 建立nginx 组
groupadd -r nginx useradd -s /sbin/nologin -g nginx -r nginx 注释：
zlib:nginx提供gzip模块，需要zlib库支持 openssl:nginx提供ssl功能 pcre:支持地址重写rewrite功能
修改版本号 再编译之前修改默认的版本号是个不错的习惯
vim src/core/nginx.h #define NGINX_VERSION "0.0.0" #define NGINX_VER "phpergao" NGINX_VERSION 编译 高大上的编译参数
./configure \ --prefix=/usr \ --sbin-path=/usr/sbin/nginx \ --conf-path=/etc/nginx/nginx.conf \ --error-log-path=/var/log/nginx/error.log \ --pid-path=/var/run/nginx/nginx....</p></section><footer class=entry-footer>December 21, 2014&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to 安装编译nginx" href=https://phpgao.github.io/nginx_installation.html></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>将nginx配置为服务</h2></header><section class=entry-content><p>编译安装nginx后，没有将nginx配置为服务，则无法使用诸如service nginx restart的命令，下面我们看看如何将其配置为服务。
编写脚本 vi /etc/init.d/nginx
写入以下内容，并修改nginx路径
#!/bin/sh # # nginx - this script starts and stops the nginx daemon # # chkconfig: - 85 15 # description: Nginx is an HTTP(S) server, HTTP(S) reverse # proxy and IMAP/POP3 proxy server # processname: nginx # chkconfig: 2345 90 91 # description: nginx web server # processname: nginx # config: /opt/nginx/conf/nginx.conf # pidfile: /opt/nginx/nginx.pid # Source function library. . /etc/init.d/functions # Source networking configuration....</p></section><footer class=entry-footer>October 9, 2014&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to 将nginx配置为服务" href=https://phpgao.github.io/run_nginx_as_service.html></a></article><article class="post-entry tag-entry"><header class=entry-header><h2>nginx配置详解</h2></header><section class=entry-content><p>#nginx配置详解
用了nginx这么久，很多配置还是记不牢，还是总结一下吧！
基本命令：
service nginx reload service nginx start service nginx stop #检测配置文件是否通过，需要比较高的权限，否则可能会报 Permission denied /usr/sbin/nginx -t #平滑重启 nginx -s reload 当编译安装好nginx后，其配置文件nginx.conf可以在/etc/nginx/下找到！
此文件就是主配置文件了。
##高层的配置
#运行用户 user www; #启动进程,一般等于cpu的总核数 worker_processes auto; #更改worker进程的最大打开文件数限制 worker_rlimit_nofile 100000; #全局错误日志及PID文件 error_log /var/log/nginx/error.log; pid /var/run/nginx.pid; #工作模式及连接数上限 events { #每个工作进程允许最大的同时连接数 worker_connections 65535; #epoll是多路复用IO(I/O Multiplexing)中的一种方式,但是仅用于linux2.6以上内核,可以大大提高nginx的性能 #如果你使用*BSD，你应该使用kqueue use epoll; #单个后台worker process进程的最大并发链接数 worker_connections 1024; #设置是否允许，Nginx在已经得到一个新连接的通知时，接收尽可能更多的连接 # multi_accept on; } HTTP 模块 HTTP模块控制着nginx http处理的所有核心特性。
#设定http服务器，利用它的反向代理功能提供负载均衡支持 http { #并不会让nginx执行的速度更快，但它可以关闭在错误页面中的nginx版本数字，这样对于安全性是有好处的 server_tokens off; #设定mime类型,类型由mime....</p></section><footer class=entry-footer>September 17, 2014&nbsp;·&nbsp;3 min&nbsp;·&nbsp;Me</footer><a class=entry-link aria-label="post link to nginx配置详解" href=https://phpgao.github.io/nginx_conf.html></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://phpgao.github.io/tags/nginx/>« Prev Page</a>
<a class=next href=https://phpgao.github.io/tags/nginx/page/3/>Next Page »</a></nav></footer></main><footer class=footer><span>&copy; 2021 <a href=https://phpgao.github.io/>老高的技术博客</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>