<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>使用shadowsocks轻松搭建翻墙环境教程 | 老高的技术博客</title><meta name=keywords content="Linux,shadowsocks,fq,free"><meta name=description content="之前大家翻墙可能都会用到免费的goagent代理，但是他速度慢，链接也不稳定，看油管更是无望，更好的解决方案是shadowsocks。
shadowsocks是一个著名的轻量级socket代理，基于python编写。
如果你有国外的VPS，那么使用shadowsocks搭建一个翻{防屏蔽}墙服务器是一件很轻松的事情！
先看看shadowsocks覆盖的客户端覆盖了多少系统，连OpenWRT都支持！


老高之前买的$4.99一年的VPS，128MB，用起来妥妥的!现在已经升级至$9.99，512MB内存，运行速度更快，翻{防屏蔽}墙速度更是没话说，如果你感兴趣，可以看看VPS购买攻略。
看完本文，你就能够轻松打造独享的翻{防屏蔽}墙环境！甚至能够将shadowsocks安装到你的路由器中，子网设备自动翻墙！再也不需要在网上购买shadowsocks的账号了，也不需要在忍受速度巨慢的免费shadowsocks账号了。
如果你的VPS是搬瓦工，那么恭喜你！你可以直接在后台一键安装shadowsocks，具体如何操作请参考使用搬瓦工(bandwagonhost)后台管理VPS&安全设置中如何一键安装shadowsocks一节，配置完毕后ss就会运行在后台，重启后也会自动运行。

友情提示：有些打包好的ss程序很难保证是否会记录你的服务器信息，所以一定要经常更新服务器端的密码或端口！或者，自己编译一个。。。。。
"><meta name=author content="Me"><link rel=canonical href=https://phpgao.github.io/shadowsocks_on_linux.html><link crossorigin=anonymous href=/assets/css/stylesheet.min.1a6ee89730e13a801d0f34e0cb5b98e96cf8c65b80500638bd599fc224ed8442.css integrity="sha256-Gm7olzDhOoAdDzTgy1uY6Wz4xluAUAY4vVmfwiTthEI=" rel="preload stylesheet" as=style><link rel=preload href="https://cdn.v2ex.com/gravatar/2b66f45a3e2f41db6522381006bfaea1?s=192" as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://phpgao.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://phpgao.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://phpgao.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://phpgao.github.io/apple-touch-icon.png><link rel=mask-icon href=https://phpgao.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.83.1"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-39288145-2','auto'),ga('send','pageview'))</script><meta property="og:title" content="使用shadowsocks轻松搭建翻墙环境教程"><meta property="og:description" content="之前大家翻墙可能都会用到免费的goagent代理，但是他速度慢，链接也不稳定，看油管更是无望，更好的解决方案是shadowsocks。
shadowsocks是一个著名的轻量级socket代理，基于python编写。
如果你有国外的VPS，那么使用shadowsocks搭建一个翻{防屏蔽}墙服务器是一件很轻松的事情！
先看看shadowsocks覆盖的客户端覆盖了多少系统，连OpenWRT都支持！


老高之前买的$4.99一年的VPS，128MB，用起来妥妥的!现在已经升级至$9.99，512MB内存，运行速度更快，翻{防屏蔽}墙速度更是没话说，如果你感兴趣，可以看看VPS购买攻略。
看完本文，你就能够轻松打造独享的翻{防屏蔽}墙环境！甚至能够将shadowsocks安装到你的路由器中，子网设备自动翻墙！再也不需要在网上购买shadowsocks的账号了，也不需要在忍受速度巨慢的免费shadowsocks账号了。
如果你的VPS是搬瓦工，那么恭喜你！你可以直接在后台一键安装shadowsocks，具体如何操作请参考使用搬瓦工(bandwagonhost)后台管理VPS&安全设置中如何一键安装shadowsocks一节，配置完毕后ss就会运行在后台，重启后也会自动运行。

友情提示：有些打包好的ss程序很难保证是否会记录你的服务器信息，所以一定要经常更新服务器端的密码或端口！或者，自己编译一个。。。。。
"><meta property="og:type" content="article"><meta property="og:url" content="https://phpgao.github.io/shadowsocks_on_linux.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-07-27T03:22:00+00:00"><meta property="article:modified_time" content="2014-07-27T03:22:00+00:00"><meta property="og:site_name" content="老高的技术博客"><meta name=twitter:card content="summary"><meta name=twitter:title content="使用shadowsocks轻松搭建翻墙环境教程"><meta name=twitter:description content="之前大家翻墙可能都会用到免费的goagent代理，但是他速度慢，链接也不稳定，看油管更是无望，更好的解决方案是shadowsocks。
shadowsocks是一个著名的轻量级socket代理，基于python编写。
如果你有国外的VPS，那么使用shadowsocks搭建一个翻{防屏蔽}墙服务器是一件很轻松的事情！
先看看shadowsocks覆盖的客户端覆盖了多少系统，连OpenWRT都支持！


老高之前买的$4.99一年的VPS，128MB，用起来妥妥的!现在已经升级至$9.99，512MB内存，运行速度更快，翻{防屏蔽}墙速度更是没话说，如果你感兴趣，可以看看VPS购买攻略。
看完本文，你就能够轻松打造独享的翻{防屏蔽}墙环境！甚至能够将shadowsocks安装到你的路由器中，子网设备自动翻墙！再也不需要在网上购买shadowsocks的账号了，也不需要在忍受速度巨慢的免费shadowsocks账号了。
如果你的VPS是搬瓦工，那么恭喜你！你可以直接在后台一键安装shadowsocks，具体如何操作请参考使用搬瓦工(bandwagonhost)后台管理VPS&安全设置中如何一键安装shadowsocks一节，配置完毕后ss就会运行在后台，重启后也会自动运行。

友情提示：有些打包好的ss程序很难保证是否会记录你的服务器信息，所以一定要经常更新服务器端的密码或端口！或者，自己编译一个。。。。。
"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://phpgao.github.io/posts/"},{"@type":"ListItem","position":2,"name":"使用shadowsocks轻松搭建翻墙环境教程","item":"https://phpgao.github.io/shadowsocks_on_linux.html"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"使用shadowsocks轻松搭建翻墙环境教程","name":"使用shadowsocks轻松搭建翻墙环境教程","description":"之前大家翻墙可能都会用到免费的goagent代理，但是他速度慢，链接也不稳定，看油管更是无望，更好的解决方案是shadowsocks。\nshadowsocks是一个著名的轻量级socket代理，基于python编写。\n如果你有国外的VPS，那么使用shadowsocks搭建一个翻{防屏蔽}墙服务器是一件很轻松的事情！\n先看看shadowsocks覆盖的客户端覆盖了多少系统，连OpenWRT都支持！\n老高之前买的$4.99一年的VPS，128MB，用起来妥妥的!现在已经升级至$9.99，512MB内存，运行速度更快，翻{防屏蔽}墙速度更是没话说，如果你感兴趣，可以看看VPS购买攻略。\n看完本文，你就能够轻松打造独享的翻{防屏蔽}墙环境！甚至能够将shadowsocks安装到你的路由器中，子网设备自动翻墙！再也不需要在网上购买shadowsocks的账号了，也不需要在忍受速度巨慢的免费shadowsocks账号了。\n如果你的VPS是搬瓦工，那么恭喜你！你可以直接在后台一键安装shadowsocks，具体如何操作请参考使用搬瓦工(bandwagonhost)后台管理VPS\u0026amp;安全设置中如何一键安装shadowsocks一节，配置完毕后ss就会运行在后台，重启后也会自动运行。\n 友情提示：有些打包好的ss程序很难保证是否会记录你的服务器信息，所以一定要经常更新服务器端的密码或端口！或者，自己编译一个。。。。。\n","keywords":["Linux","shadowsocks","fq","free"],"articleBody":"之前大家翻墙可能都会用到免费的goagent代理，但是他速度慢，链接也不稳定，看油管更是无望，更好的解决方案是shadowsocks。\nshadowsocks是一个著名的轻量级socket代理，基于python编写。\n如果你有国外的VPS，那么使用shadowsocks搭建一个翻{防屏蔽}墙服务器是一件很轻松的事情！\n先看看shadowsocks覆盖的客户端覆盖了多少系统，连OpenWRT都支持！\n老高之前买的$4.99一年的VPS，128MB，用起来妥妥的!现在已经升级至$9.99，512MB内存，运行速度更快，翻{防屏蔽}墙速度更是没话说，如果你感兴趣，可以看看VPS购买攻略。\n看完本文，你就能够轻松打造独享的翻{防屏蔽}墙环境！甚至能够将shadowsocks安装到你的路由器中，子网设备自动翻墙！再也不需要在网上购买shadowsocks的账号了，也不需要在忍受速度巨慢的免费shadowsocks账号了。\n如果你的VPS是搬瓦工，那么恭喜你！你可以直接在后台一键安装shadowsocks，具体如何操作请参考使用搬瓦工(bandwagonhost)后台管理VPS\u0026安全设置中如何一键安装shadowsocks一节，配置完毕后ss就会运行在后台，重启后也会自动运行。\n 友情提示：有些打包好的ss程序很难保证是否会记录你的服务器信息，所以一定要经常更新服务器端的密码或端口！或者，自己编译一个。。。。。\n 安装python版本的shadowsocks 假设已经获取了管理员权限，如果没有，有些命令需要用sudo提权。\nubuntu apt-get update apt-get install -y python-pip pip install shadowsocks centos curl --show-error --retry 5 https://bootstrap.pypa.io/get-pip.py | python pip install shadowsocks 此时系统会多出来两个程序：\n/usr/bin/ssserver /usr/bin/sslocal # 运行帮助命令 ssserver -h usage: ssserver [OPTION]... A fast tunnel proxy that helps you bypass firewalls. You can supply configurations via either config file or command line arguments. Proxy options: -c CONFIG path to config file -s SERVER_ADDR server address, default: 0.0.0.0 -p SERVER_PORT server port, default: 8388 -k PASSWORD password -m METHOD encryption method, default: aes-256-cfb -t TIMEOUT timeout in seconds, default: 300 --fast-open use TCP_FASTOPEN, requires Linux 3.7+ --workers WORKERS number of workers, available on Unix/Linux --forbidden-ip IPLIST comma seperated IP list forbidden to connect --manager-address ADDR optional server manager UDP address, see wiki General options: -h, --help show this help message and exit -d start/stop/restart daemon mode --pid-file PID_FILE pid file for daemon mode --log-file LOG_FILE log file for daemon mode --user USER username to run as -v, -vv verbose mode -q, -qq quiet mode, only show warnings/errors --version show version information Online help:  开机启动 执行vim /etc/rc.d/rc.local，添加以下内容，（老高这里开了4个端口），你可以只使用一条记录。最后别忘了执行chmod +x /etc/rc.d/rc.local以赋予其执行权限！\n简单的解释一下各个参数的作用\n-p ss服务器的端口号 -k 密码 -m 加密方式，一般用rc4-md5，table和rc4不要用 --workers 子进程个数 --pid-file 记录pid的文件 --log-file 记录日志 --user 执行用户的权限，一般使用nobody -v 表示输出详细信息 -d 使用守护进程模式运行 老高的开机启动脚本：\nssserver -p 443 -k passwd -m rc4-md5 --workers 10 --pid-file /tmp/ss.pid --log-file /tmp/ss.log --user nobody -v -d start ssserver -p 3389 -k passwd -m rc4-md5 --workers 10 --pid-file /tmp/ss2.pid --log-file /tmp/ss2.log --user nobody -v -d start ssserver -p 10010 -k passwd -m rc4-md5 --workers 10 --pid-file /tmp/ss3.pid --log-file /tmp/ss3.log --user nobody -v -d start ssserver -p 22222 -k passwd -m rc4-md5 --workers 10 --pid-file /tmp/ss4.pid --log-file /tmp/ss4.log --user nobody -v -d start 这里老高推荐使用-c选项指定config.json的方式配置ss(具体方式下面有提到)，配置文件格式基本兼容。GO版本有多端口特性，需要多端口服务的可以自己编译试试。\n编译shadowsocks-libev 与介绍原版(python版)的shadowbox服务端，老高这次要介绍的是shadowsocks-libev！\n项目地址：shadowsocks/shadowsocks-libev\n项目作者：@madeye\n以下说明转自：shadowsocks-libev 1.2 发布\nshadowsocks-libev 是一个 shadowsocks 协议的轻量级实现，是 shadowsocks-android, shadowsocks-ios 以及 shadowsocks-openwrt 的上游项目。其具有以下特点：\n 体积小巧，静态编译并打包后只有 100 KB。 高并发，基于 libev 实现的异步 I/O，以及基于线程池的异步 DNS，同时连接数可上万。 低资源占用，几乎不占用 CPU 资源，服务器端内存占用一般在 3MB 左右。 跨平台，适用于所有常见硬件平台，已测试通过的包括 x86，ARM 和 MIPS。也适用于大部分 POSIX 的操作系统或平台，包括 Linux，OS X 和 gwin 等。 协议及配置兼容，完全兼容 shadowsocks 协议，且兼容标准实现中的 JSON 风格配置文件，可与任意实现的 shadowsocks 端或服务端搭配使用。  shadowsocks-libev 包括服务端和客户端两部分，一共三个模块。\n ss-server：服务器端，部署在远程服务器，提供 shadowsocks 服务。 ss-local：客户端，提供本地 socks5 协议代理。 ss-redir：客户端，提供本地透明代理，需要与 NAT 配合使用，具体使用方法参见文档。  原版shadowsocks 请参考 安装shadowsocks-python并启用chacha20加密\n 准备好的shadowsocks怎么用呢？请看下文。\n服务端  你的系统最好是redhat，centos，ubuntu或者debian\n 安装必要组建 centos执行 yum install build-essential autoconf libtool openssl-devel gcc -y debian执行 apt-get install build-essential autoconf libtool libssl-dev gcc -y\n安装git centos执行 yum install git -y debian执行 apt-get install git -y 装完了执行 git --version检查是否安装成功。\nshadowsocks 下载及编译 git clone https://github.com/madeye/shadowsocks-libev.git cd shadowsocks-libev ./configure make \u0026\u0026 make install 程序会被安装至/usr/local/bin/下，该路径已存在于系统变量中，所以可以直接使用程序名运行。\n/usr/local/bin/ss-local /usr/local/bin/ss-tunnel /usr/local/bin/ss-server /usr/local/bin/ss-redir 如何使用 在使用shadowsocks的时候，你可以随时输入命令ss-server -h查看使用帮助，老高在此将最新的使用帮助打印出来\nusage: ss-[local|redir|server|tunnel] -s  host name or ip address of your remote server -p  port number of your remote server -l  port number of your local server -k  password of your remote server [-m ] encrypt method: table, rc4, rc4-md5 aes-128-cfb, aes-192-cfb, aes-256-cfb, bf-cfb, camellia-128-cfb, camellia-192-cfb, camellia-256-cfb, cast5-cfb, des-cfb, idea-cfb, rc2-cfb, seed-cfb, salsa20 and chacha20 [-f ] file to store the pid [-t ] socket timeout in seconds [-c ] config file in json [-i ] network interface to bind, not available in redir mode [-b ] local address to bind, not available in server mode [-u] enable udprelay mode not available in redir mode [-L :] setup a local port forwarding tunnel, only available in tunnel mode [-v] verbose mode [--fast-open] enable TCP fast open, only available on Linux kernel  3.7.0 [--acl ] config file of ACL (Access Control List) notes: ss-redir provides a transparent proxy function and only works on the Linux platform with iptables. 运行服务端  ps.执行命令时，请去掉方括号。加密方式可选择：\n  encrypt method: table, rc4, rc4-md5,aes-128-cfb, aes-192-cfb, aes-256-cfb,bf-cfb, camellia-128-cfb, camellia-192-cfb,camellia-256-cfb, cast5-cfb, des-cfb, idea-cfb,rc2-cfb, seed-cfb, salsa20 and chacha20\n  选择加密方式的时候请注意客户端是否支持，同时官方不推荐rc4,des-cfb,table,salsa20-ctr这四种加密方式。\n 命令行运行 前台运行服务端：\nss-server -s [yourip] -p [Server Port] -k [password] -m [encryption methods] 后台运行服务端：\nnohup ss-server -s [Server IP] -p [Server Port] -k [Password] -m [encryption methods] \u0026 使用配置文件运行 注意，config.json需要自己创建，并且需要绝对路径\n使用-c 指定配置文件， -f 创建守护进程：\nvim config.json 将下面的配置写入config.json\n使用的时候请删除注释文字，否则可能会报错！！\n# 注释版配置 { \"server\":\"servier_ip\", # 服务器IP \"server_port\":65432, # ss服务器所使用的端口号，建议改到30000-60000 \"password\":\"password\", # ss服务器密码，轻易不要分享 \"timeout\":60, # 超时时间，建议设置为60 \"method\":\"rc4-md5\" # 加密方式，需要和客户端配合设置 } # 复制粘贴版 { \"server\":\"servier_ip\", \"server_port\":65432, \"password\":\"password\", \"timeout\":60, \"method\":\"rc4-md5\" } 然后执行 ss-server -c config.json -f /tmp/ss.pid 即可！\n写入开机脚本 echo \"/usr/local/bin/ss-server -c /home/***/config.json -f /tmp/ss-server.pid\"  /etc/rc.local 为了安全起见（非必需），我们使用非root用户运行ss，如何实现呢？\n# 如果没有非root用户 # 我们现在就新建一个普通用户 useradd laogao # 为laogao创建密码 passwd laogao  输入两次密码 # 切换用户至laogao su - laogao # 在主目录创建第一个配置文件，配置格式请参考`使用配置文件运行`一节 vim ~/config1.json # 保存完毕即可立即运行 /usr/local/bin/ss-server -c ~/config1.json -f /tmp/ss1.pid # 设置开启自启动 # 我们先切换至root用户 su - root # 接着在启动脚本里加入启动命令 # 指定ss以用户laogao的权限运行 # 执行下面的命令时一定注意文件路径是否正确 echo \"su - laogao -c \\\"/usr/local/bin/ss-server -c /home/laogao/config1.json -f /tmp/ss1.pid\\\"\"  /etc/rc.local 更高级的运行方式 请参考 使用supervisor托管shadowsocks\n多用户(实例)运行 可能大家都注意到了，在上一节我们提到了config1.json是第一个配置文件，这是为什么呢？\n没有错，我们还可以创建配置文件2—-config2.json，并以同样的方式运行。\n这样，我们的一个服务器就可以对外提供两种，端口不同、密码不同、加密方式也可能不同的shadowsocks服务，然后共享给不同的基友，是不是很方便啊。\n 需要注意的是，多个配置文件一定要注意的是，配置的端口和pid文件一定是不同的！而密码及加密方式，甚至服务器IP都没有限制。\n  有些版本的ss提供了更方便的配置方式，但是老高没试过，所以在此就不深究。\n 例子如下(注意端口不能相同)\nconfig1.json { \"server\":\"1.1.1.1\" \"server_port\":11111, \"password\":\"test1\", \"timeout\":100, \"method\":\"aes-256-cfb\" } config2.json { \"server\":\"2.2.2.2 \"server_port\":22222 \"password\":\"test2\", \"timeout\":100, \"method\":\"rc4-md5\" } # 多实例运行例子： /usr/local/bin/ss-server -c ~/config1.json -f /tmp/ss1.pid /usr/local/bin/ss-server -c ~/config2.json -f /tmp/ss2.pid # 查看进程 ps -ef|grep ss-server xxx 1344 1 0 20:12 ? 00:00:00 ss-server -c /home/xxx/config1.json -f /tmp/1.pid xxx 1491 1 0 20:24 ? 00:00:00 ss-server -c /home/xxx/config2.json -f /tmp/2.pid 使用supervisor托管shadowsocks 请参考使用supervisor托管shadowsocks，让shadowsocks运行的更稳定！\n至此，服务器端可设置已完成！\n客户端 当我们搭建完成了shadowsocks服务端，其实只完成了FQ的一半工作，想要真正与世界联通，还需要一个客户端与服务端连接。\nss的客户端也是由clowwindy大牛提供，他的另一个作品ChinaDNS也很NB，大家可以关注一下！\n客户端下载 shadowsocks的客户端、服务端还有chrome插件Proxy-SwitchyOmega_v2.3.13的下载，请移步 shadowsocks相关资源下载\n下面老高以ShadowsocksX-2.6为例，讲讲如何配置\n首先安装完毕后找到应用程序并运行 运行后程序会最小化在系统右上角（Windows在右下角），打开菜单，点击服务器–»服务器设定\n配置方法 其中1.1.1.1即服务器的IP地址 端口号对应服务器设定的server_port 加密方式和密码就更不必说了\n添加完毕，点击确定后，客户端和服务器马上就可以见面了。\n最后一步 打开Shadowsocks，教程完毕！\n ps.想要在快速的在影梭配置服务器，可以通过在PC端点击生成二维码按钮，然后使用影梭扫描即可！\n 老高望着着简单而粗狂的画面，许久说不出话来。\n是不是激动的要哭了？\n今天先写到这儿，十分感谢广大基友的捧场！老高在此十分感谢！\n有兴趣的TX可以在此留下你的邮箱，用AT替换调你的@，老高有一个闲置的VPS可以提供测试ss帐号，也是搬瓦工的。\n密码大概想起来再改一次，流量不多，看油兔就算了吧。\nProxy SwitchyOmega下载地址\n浏览器 shadowsocks的浏览器支持主要是通过扩展设置代理。目前chrome、firefox、Safari、Opera浏览器都完美支持。\n浏览器只要配置一下，使用客户端提供的端口就能够工作了。\n值得一提的gfwlist，有了他你无需自己写规则了，把它加入在线规则里，更新一下即可！\nhttps://autoproxy-gfwlist.googlecode.com/svn/trunk/g{防}f{he}w{xie}list.txt\nfirefox - Foxyproxy chrome - switchsharp\n2014年8月20日更新：\n增加一个客户端\n2015年1月7日更新：\n加密说明\nProxy SwitchyOmega更新\n2015年01月08日更新：\n文章重构\n2015年3月12日更新：\n使用supervisor托管shadowsocks，让shadowsocks运行的更稳定！\n 猜你喜欢：\n小米路由器mini折腾之自动翻墙篇\n30元一年，打造自己的翻墙VPS\nVPS安全之SSH设置\n","wordCount":"832","inLanguage":"en","datePublished":"2014-07-27T03:22:00Z","dateModified":"2014-07-27T03:22:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://phpgao.github.io/shadowsocks_on_linux.html"},"publisher":{"@type":"Organization","name":"老高的技术博客","logo":{"@type":"ImageObject","url":"https://phpgao.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://phpgao.github.io/ accesskey=h title="老高的博客 (Alt + H)">老高的博客</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://phpgao.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://phpgao.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://blog.phpgao.com title="old blog"><span>old blog</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://phpgao.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://phpgao.github.io/posts/>Posts</a></div><h1 class=post-title>使用shadowsocks轻松搭建翻墙环境教程</h1><div class=post-meta>July 27, 2014&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/2014-07-27_shadowsocks_on_linux.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>之前大家翻墙可能都会用到免费的goagent代理，但是他速度慢，链接也不稳定，看油管更是无望，更好的解决方案是shadowsocks。</p><p>shadowsocks是一个著名的轻量级socket代理，基于python编写。</p><p>如果你有国外的VPS，那么使用shadowsocks搭建一个翻{防屏蔽}墙服务器是一件很轻松的事情！</p><p>先看看<a href=http://shadowsocks.org/en/download/clients.html>shadowsocks覆盖的客户端覆盖了多少系统</a>，连OpenWRT都支持！</p><p><img loading=lazy src=https://blog.phpgao.com/usr/uploads/2016/05/3138848860.jpg alt=shadowsocks客户端></p><p>老高之前买的$4.99一年的VPS，128MB，用起来妥妥的!现在已经升级至$9.99，512MB内存，运行速度更快，翻{防屏蔽}墙速度更是没话说，如果你感兴趣，可以看看<a href=https://blog.phpgao.com/vps.html>VPS购买攻略</a>。</p><p>看完本文，你就能够轻松打造独享的翻{防屏蔽}墙环境！<a href=https://blog.phpgao.com/carzy_router.html>甚至能够将shadowsocks安装到你的路由器中，子网设备自动翻墙</a>！再也不需要在网上购买shadowsocks的账号了，也不需要在忍受速度巨慢的免费shadowsocks账号了。</p><p>如果你的VPS是搬瓦工，那么恭喜你！你可以直接在后台一键安装shadowsocks，具体如何操作请参考<a href=https://blog.phpgao.com/bandwagonhost_vps_panel.html>使用搬瓦工(bandwagonhost)后台管理VPS&安全设置</a>中如何一键安装shadowsocks一节，配置完毕后ss就会运行在后台，重启后也会自动运行。</p><blockquote><p>友情提示：有些打包好的ss程序很难保证是否会记录你的服务器信息，所以一定要经常更新服务器端的密码或端口！或者，自己编译一个。。。。。</p></blockquote><h2 id=安装python版本的shadowsocks>安装python版本的shadowsocks<a hidden class=anchor aria-hidden=true href=#安装python版本的shadowsocks>#</a></h2><p><strong>假设已经获取了管理员权限，如果没有，有些命令需要用sudo提权。</strong></p><h3 id=ubuntu>ubuntu<a hidden class=anchor aria-hidden=true href=#ubuntu>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>apt-get update
apt-get install -y python-pip
pip install shadowsocks
</code></pre></div><h3 id=centos>centos<a hidden class=anchor aria-hidden=true href=#centos>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>curl --show-error --retry 5 https://bootstrap.pypa.io/get-pip.py | python
pip install shadowsocks
</code></pre></div><p>此时系统会多出来两个程序：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>/usr/bin/ssserver
/usr/bin/sslocal

# 运行帮助命令
ssserver -h
usage: ssserver [OPTION]...
A fast tunnel proxy that helps you bypass firewalls.

You can supply configurations via either config file or command line arguments.

Proxy options:
  -c CONFIG              path to config file
  -s SERVER_ADDR         server address, default: 0.0.0.0
  -p SERVER_PORT         server port, default: 8388
  -k PASSWORD            password
  -m METHOD              encryption method, default: aes-256-cfb
  -t TIMEOUT             timeout in seconds, default: 300
  --fast-open            use TCP_FASTOPEN, requires Linux 3.7+
  --workers WORKERS      number of workers, available on Unix/Linux
  --forbidden-ip IPLIST  comma seperated IP list forbidden to connect
  --manager-address ADDR optional server manager UDP address, see wiki

General options:
  -h, --help             show this help message and exit
  -d start/stop/restart  daemon mode
  --pid-file PID_FILE    pid file for daemon mode
  --log-file LOG_FILE    log file for daemon mode
  --user USER            username to run as
  -v, -vv                verbose mode
  -q, -qq                quiet mode, only show warnings/errors
  --version              show version information

Online help: &lt;https://github.com/shadowsocks/shadowsocks&gt;
</code></pre></div><h3 id=开机启动>开机启动<a hidden class=anchor aria-hidden=true href=#开机启动>#</a></h3><p>执行<code>vim /etc/rc.d/rc.local</code>，添加以下内容，（老高这里开了4个端口），你可以只使用一条记录。<strong>最后</strong>别忘了执行<code>chmod +x /etc/rc.d/rc.local</code>以赋予其执行权限！</p><p>简单的解释一下各个参数的作用</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>-p ss服务器的端口号
-k 密码
-m 加密方式，一般用rc4-md5，table和rc4不要用
--workers 子进程个数
--pid-file 记录pid的文件
--log-file 记录日志
--user 执行用户的权限，一般使用nobody
-v 表示输出详细信息
-d 使用守护进程模式运行
</code></pre></div><p>老高的开机启动脚本：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>ssserver -p 443 -k passwd -m rc4-md5 --workers 10 --pid-file /tmp/ss.pid --log-file /tmp/ss.log --user nobody -v -d start

ssserver -p 3389 -k passwd -m rc4-md5 --workers 10 --pid-file /tmp/ss2.pid --log-file /tmp/ss2.log --user nobody -v -d start

ssserver -p 10010 -k passwd -m rc4-md5 --workers 10 --pid-file /tmp/ss3.pid --log-file /tmp/ss3.log --user nobody -v -d start

ssserver -p 22222 -k passwd -m rc4-md5 --workers 10 --pid-file /tmp/ss4.pid --log-file /tmp/ss4.log --user nobody -v -d start
</code></pre></div><p>这里老高推荐使用<code>-c</code>选项指定config.json的方式配置ss(具体方式下面有提到)，配置文件格式基本兼容。GO版本有多端口特性，需要多端口服务的可以自己编译试试。</p><h2 id=编译shadowsocks-libev>编译shadowsocks-libev<a hidden class=anchor aria-hidden=true href=#编译shadowsocks-libev>#</a></h2><p>与介绍原版(python版)的shadowbox服务端，老高这次要介绍的是shadowsocks-libev！</p><p>项目地址：<a href=https://github.com/shadowsocks/shadowsocks-libev>shadowsocks/shadowsocks-libev</a></p><p>项目作者：<a href=http://cn.v2ex.com/member/madeye>@madeye</a></p><p>以下说明转自：<a href=http://www.v2ex.com/t/68872>shadowsocks-libev 1.2 发布</a></p><p>shadowsocks-libev 是一个 shadowsocks 协议的轻量级实现，是 shadowsocks-android, shadowsocks-ios 以及 shadowsocks-openwrt 的上游项目。其具有以下特点：</p><ul><li>体积小巧，静态编译并打包后只有 100 KB。</li><li>高并发，基于 libev 实现的异步 I/O，以及基于线程池的异步 DNS，同时连接数可上万。</li><li>低资源占用，几乎不占用 CPU 资源，服务器端内存占用一般在 3MB 左右。</li><li>跨平台，适用于所有常见硬件平台，已测试通过的包括 x86，ARM 和 MIPS。也适用于大部分 POSIX 的操作系统或平台，包括 Linux，OS X 和 gwin 等。</li><li>协议及配置兼容，完全兼容 shadowsocks 协议，且兼容标准实现中的 JSON 风格配置文件，可与任意实现的 shadowsocks 端或服务端搭配使用。</li></ul><p>shadowsocks-libev 包括服务端和客户端两部分，一共三个模块。</p><ul><li>ss-server：服务器端，部署在远程服务器，提供 shadowsocks 服务。</li><li>ss-local：客户端，提供本地 socks5 协议代理。</li><li>ss-redir：客户端，提供本地透明代理，需要与 NAT 配合使用，具体使用方法参见文档。</li></ul><h2 id=原版shadowsocks>原版shadowsocks<a hidden class=anchor aria-hidden=true href=#原版shadowsocks>#</a></h2><p>请参考 <a href=https://blog.phpgao.com/shadowsocks_chacha20.html>安装shadowsocks-python并启用chacha20加密</a></p><hr><p>准备好的shadowsocks怎么用呢？请看下文。</p><h2 id=服务端>服务端<a hidden class=anchor aria-hidden=true href=#服务端>#</a></h2><blockquote><p>你的系统最好是redhat，centos，ubuntu或者debian</p></blockquote><h3 id=安装必要组建>安装必要组建<a hidden class=anchor aria-hidden=true href=#安装必要组建>#</a></h3><p>centos执行 <code>yum install build-essential autoconf libtool openssl-devel gcc -y</code>
debian执行 <code>apt-get install build-essential autoconf libtool libssl-dev gcc -y</code></p><h3 id=安装git>安装git<a hidden class=anchor aria-hidden=true href=#安装git>#</a></h3><p>centos执行 <code>yum install git -y</code>
debian执行 <code>apt-get install git -y</code>
装完了执行 <code>git --version</code>检查是否安装成功。</p><h3 id=shadowsocks-下载及编译>shadowsocks 下载及编译<a hidden class=anchor aria-hidden=true href=#shadowsocks-下载及编译>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git clone https://github.com/madeye/shadowsocks-libev.git
cd shadowsocks-libev
./configure
make <span style=color:#f92672>&amp;&amp;</span> make install
</code></pre></div><p>程序会被安装至<code>/usr/local/bin/</code>下，该路径已存在于系统变量中，所以可以直接使用程序名运行。</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>/usr/local/bin/ss-local
/usr/local/bin/ss-tunnel
/usr/local/bin/ss-server
/usr/local/bin/ss-redir
</code></pre></div><h3 id=如何使用>如何使用<a hidden class=anchor aria-hidden=true href=#如何使用>#</a></h3><p>在使用shadowsocks的时候，你可以随时输入命令<code>ss-server -h</code>查看使用帮助，老高在此将最新的使用帮助打印出来</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>usage:

    ss-<span style=color:#f92672>[</span>local|redir|server|tunnel<span style=color:#f92672>]</span>

          -s &lt;server_host&gt;           host name or ip address of your remote server
          -p &lt;server_port&gt;           port number of your remote server
          -l &lt;local_port&gt;            port number of your local server
          -k &lt;password&gt;              password of your remote server


          <span style=color:#f92672>[</span>-m &lt;encrypt_method&gt;<span style=color:#f92672>]</span>      encrypt method: table, rc4, rc4-md5
                                     aes-128-cfb, aes-192-cfb, aes-256-cfb,
                                     bf-cfb, camellia-128-cfb, camellia-192-cfb,
                                     camellia-256-cfb, cast5-cfb, des-cfb, idea-cfb,
                                     rc2-cfb, seed-cfb, salsa20 and chacha20
          <span style=color:#f92672>[</span>-f &lt;pid_file&gt;<span style=color:#f92672>]</span>            file to store the pid
          <span style=color:#f92672>[</span>-t &lt;timeout&gt;<span style=color:#f92672>]</span>             socket timeout in seconds
          <span style=color:#f92672>[</span>-c &lt;config_file&gt;<span style=color:#f92672>]</span>         config file in json


          <span style=color:#f92672>[</span>-i &lt;interface&gt;<span style=color:#f92672>]</span>           network interface to bind,
                                     not available in redir mode
          <span style=color:#f92672>[</span>-b &lt;local_address&gt;<span style=color:#f92672>]</span>       local address to bind,
                                     not available in server mode
          <span style=color:#f92672>[</span>-u<span style=color:#f92672>]</span>                       enable udprelay mode
                                     not available in redir mode
          <span style=color:#f92672>[</span>-L &lt;addr&gt;:&lt;port&gt;<span style=color:#f92672>]</span>         setup a local port forwarding tunnel,
                                     only available in tunnel mode
          <span style=color:#f92672>[</span>-v<span style=color:#f92672>]</span>                       verbose mode


          <span style=color:#f92672>[</span>--fast-open<span style=color:#f92672>]</span>              enable TCP fast open,
                                     only available on Linux kernel &gt; 3.7.0
          <span style=color:#f92672>[</span>--acl &lt;acl_file&gt;<span style=color:#f92672>]</span>         config file of ACL <span style=color:#f92672>(</span>Access Control List<span style=color:#f92672>)</span>

notes:

    ss-redir provides a transparent proxy <span style=color:#66d9ef>function</span> and only works on the 
    Linux platform with iptables.
</code></pre></div><h4 id=运行服务端>运行服务端<a hidden class=anchor aria-hidden=true href=#运行服务端>#</a></h4><blockquote><p>ps.执行命令时，请去掉方括号。加密方式可选择：</p></blockquote><blockquote><p>encrypt method: table, rc4, rc4-md5,aes-128-cfb, aes-192-cfb, aes-256-cfb,bf-cfb, camellia-128-cfb, camellia-192-cfb,camellia-256-cfb, cast5-cfb, des-cfb, idea-cfb,rc2-cfb, seed-cfb, salsa20 and chacha20</p></blockquote><blockquote><p>选择加密方式的时候请注意客户端是否支持，同时官方不推荐rc4,des-cfb,table,salsa20-ctr这四种加密方式。</p></blockquote><h5 id=命令行运行>命令行运行<a hidden class=anchor aria-hidden=true href=#命令行运行>#</a></h5><p>前台运行服务端：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>ss-server -s <span style=color:#f92672>[</span>yourip<span style=color:#f92672>]</span> -p <span style=color:#f92672>[</span>Server Port<span style=color:#f92672>]</span> -k <span style=color:#f92672>[</span>password<span style=color:#f92672>]</span> -m <span style=color:#f92672>[</span>encryption methods<span style=color:#f92672>]</span>
</code></pre></div><p>后台运行服务端：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>nohup ss-server -s <span style=color:#f92672>[</span>Server IP<span style=color:#f92672>]</span> -p <span style=color:#f92672>[</span>Server Port<span style=color:#f92672>]</span> -k <span style=color:#f92672>[</span>Password<span style=color:#f92672>]</span> -m <span style=color:#f92672>[</span>encryption methods<span style=color:#f92672>]</span> &amp;
</code></pre></div><h5 id=使用配置文件运行>使用配置文件运行<a hidden class=anchor aria-hidden=true href=#使用配置文件运行>#</a></h5><p><strong>注意，config.json需要自己创建，并且需要绝对路径</strong></p><p>使用-c 指定配置文件， -f 创建守护进程：</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>vim config.json
</code></pre></div><p>将下面的配置写入config.json</p><p>使用的时候请删除<strong>注释文字</strong>，否则可能会报错！！</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#960050;background-color:#1e0010>注释版配置</span>
{
    <span style=color:#f92672>&#34;server&#34;</span>:<span style=color:#e6db74>&#34;servier_ip&#34;</span>,   <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#960050;background-color:#1e0010>服务器IP</span>
    <span style=color:#f92672>&#34;server_port&#34;</span>:<span style=color:#ae81ff>65432</span>,     <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#960050;background-color:#1e0010>ss服务器所使用的端口号，建议改到30000-60000</span>
    <span style=color:#f92672>&#34;password&#34;</span>:<span style=color:#e6db74>&#34;password&#34;</span>,   <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#960050;background-color:#1e0010>ss服务器密码，轻易不要分享</span>
    <span style=color:#f92672>&#34;timeout&#34;</span>:<span style=color:#ae81ff>60</span>,            <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#960050;background-color:#1e0010>超时时间，建议设置为60</span>
    <span style=color:#f92672>&#34;method&#34;</span>:<span style=color:#e6db74>&#34;rc4-md5&#34;</span>         <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#960050;background-color:#1e0010>加密方式，需要和客户端配合设置</span>
}

<span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#960050;background-color:#1e0010>复制粘贴版</span>

{
    <span style=color:#f92672>&#34;server&#34;</span>:<span style=color:#e6db74>&#34;servier_ip&#34;</span>,
    <span style=color:#f92672>&#34;server_port&#34;</span>:<span style=color:#ae81ff>65432</span>,
    <span style=color:#f92672>&#34;password&#34;</span>:<span style=color:#e6db74>&#34;password&#34;</span>,
    <span style=color:#f92672>&#34;timeout&#34;</span>:<span style=color:#ae81ff>60</span>,
    <span style=color:#f92672>&#34;method&#34;</span>:<span style=color:#e6db74>&#34;rc4-md5&#34;</span>
}
</code></pre></div><p>然后执行 <code>ss-server -c config.json -f /tmp/ss.pid</code> 即可！</p><h3 id=写入开机脚本>写入开机脚本<a hidden class=anchor aria-hidden=true href=#写入开机脚本>#</a></h3><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>echo <span style=color:#e6db74>&#34;/usr/local/bin/ss-server -c /home/***/config.json -f /tmp/ss-server.pid&#34;</span> &gt;&gt; /etc/rc.local
</code></pre></div><p>为了安全起见（非必需），我们使用<strong>非root用户</strong>运行ss，如何实现呢？</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># 如果没有非root用户</span>
<span style=color:#75715e># 我们现在就新建一个普通用户</span>
useradd laogao
<span style=color:#75715e># 为laogao创建密码</span>
passwd laogao
&gt; 输入两次密码
<span style=color:#75715e># 切换用户至laogao</span>
su - laogao
<span style=color:#75715e># 在主目录创建第一个配置文件，配置格式请参考`使用配置文件运行`一节</span>
vim ~/config1.json

<span style=color:#75715e># 保存完毕即可立即运行</span>
/usr/local/bin/ss-server -c ~/config1.json -f /tmp/ss1.pid

<span style=color:#75715e># 设置开启自启动</span>
<span style=color:#75715e># 我们先切换至root用户</span>
su - root

<span style=color:#75715e># 接着在启动脚本里加入启动命令</span>
<span style=color:#75715e># 指定ss以用户laogao的权限运行</span>
<span style=color:#75715e># 执行下面的命令时一定注意文件路径是否正确</span>
echo <span style=color:#e6db74>&#34;su - laogao -c \&#34;/usr/local/bin/ss-server -c /home/laogao/config1.json -f /tmp/ss1.pid\&#34;&#34;</span> &gt;&gt; /etc/rc.local
</code></pre></div><h3 id=更高级的运行方式>更高级的运行方式<a hidden class=anchor aria-hidden=true href=#更高级的运行方式>#</a></h3><p>请参考 <a href=https://blog.phpgao.com/supervisor_shadowsocks.html>使用supervisor托管shadowsocks</a></p><h3 id=多用户实例运行>多用户(实例)运行<a hidden class=anchor aria-hidden=true href=#多用户实例运行>#</a></h3><p>可能大家都注意到了，在上一节我们提到了config1.json是第一个配置文件，这是为什么呢？</p><p>没有错，我们还可以创建配置文件2&mdash;-config2.json，并以同样的方式运行。</p><p>这样，我们的一个服务器就可以对外提供两种，端口不同、密码不同、加密方式也可能不同的shadowsocks服务，然后共享给不同的基友，是不是很方便啊。</p><blockquote><p>需要注意的是，多个配置文件一定要注意的是，配置的端口和pid文件一定是不同的！而密码及加密方式，甚至服务器IP都没有限制。</p></blockquote><blockquote><p>有些版本的ss提供了更方便的配置方式，但是老高没试过，所以在此就不深究。</p></blockquote><p>例子如下(注意端口不能相同)</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=color:#960050;background-color:#1e0010>config</span><span style=color:#ae81ff>1</span><span style=color:#960050;background-color:#1e0010>.json</span>

{
    <span style=color:#f92672>&#34;server&#34;</span>:<span style=color:#e6db74>&#34;1.1.1.1&#34;</span>
    <span style=color:#e6db74>&#34;server_port&#34;</span>:<span style=color:#ae81ff>11111</span>,
    <span style=color:#f92672>&#34;password&#34;</span>:<span style=color:#e6db74>&#34;test1&#34;</span>,
    <span style=color:#f92672>&#34;timeout&#34;</span>:<span style=color:#ae81ff>100</span>,
    <span style=color:#f92672>&#34;method&#34;</span>:<span style=color:#e6db74>&#34;aes-256-cfb&#34;</span>
}

<span style=color:#960050;background-color:#1e0010>config</span><span style=color:#ae81ff>2</span><span style=color:#960050;background-color:#1e0010>.json</span>

{
    <span style=color:#f92672>&#34;server&#34;</span>:<span style=color:#e6db74>&#34;2.2.2.2
</span><span style=color:#e6db74>    &#34;</span><span style=color:#960050;background-color:#1e0010>server_port</span><span style=color:#e6db74>&#34;:22222
</span><span style=color:#e6db74>    &#34;</span><span style=color:#960050;background-color:#1e0010>password</span><span style=color:#e6db74>&#34;:&#34;</span><span style=color:#960050;background-color:#1e0010>test</span><span style=color:#ae81ff>2</span><span style=color:#e6db74>&#34;,
</span><span style=color:#e6db74>    &#34;</span><span style=color:#960050;background-color:#1e0010>timeout</span><span style=color:#e6db74>&#34;:100,
</span><span style=color:#e6db74>    &#34;</span><span style=color:#960050;background-color:#1e0010>method</span><span style=color:#e6db74>&#34;:&#34;</span><span style=color:#960050;background-color:#1e0010>rc</span><span style=color:#ae81ff>4</span><span style=color:#960050;background-color:#1e0010>-md</span><span style=color:#ae81ff>5</span><span style=color:#960050;background-color:#1e0010>&#34;</span>
}


<span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#960050;background-color:#1e0010>多实例运行例子：</span>
<span style=color:#960050;background-color:#1e0010>/usr/local/bin/ss-server</span> <span style=color:#960050;background-color:#1e0010>-c</span> <span style=color:#960050;background-color:#1e0010>~/config</span><span style=color:#ae81ff>1</span><span style=color:#960050;background-color:#1e0010>.json</span> <span style=color:#960050;background-color:#1e0010>-f</span> <span style=color:#960050;background-color:#1e0010>/tmp/ss</span><span style=color:#ae81ff>1</span><span style=color:#960050;background-color:#1e0010>.pid</span>
<span style=color:#960050;background-color:#1e0010>/usr/local/bin/ss-server</span> <span style=color:#960050;background-color:#1e0010>-c</span> <span style=color:#960050;background-color:#1e0010>~/config</span><span style=color:#ae81ff>2</span><span style=color:#960050;background-color:#1e0010>.json</span> <span style=color:#960050;background-color:#1e0010>-f</span> <span style=color:#960050;background-color:#1e0010>/tmp/ss</span><span style=color:#ae81ff>2</span><span style=color:#960050;background-color:#1e0010>.pid</span>

<span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#960050;background-color:#1e0010>查看进程</span>
<span style=color:#960050;background-color:#1e0010>ps</span> <span style=color:#960050;background-color:#1e0010>-ef|grep</span> <span style=color:#960050;background-color:#1e0010>ss-server</span>


<span style=color:#960050;background-color:#1e0010>xxx</span>      <span style=color:#ae81ff>1344</span>     <span style=color:#ae81ff>1</span>  <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>20</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#ae81ff>12</span> <span style=color:#960050;background-color:#1e0010>?</span>        <span style=color:#ae81ff>00</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#ae81ff>00</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#ae81ff>00</span> <span style=color:#960050;background-color:#1e0010>ss-server</span> <span style=color:#960050;background-color:#1e0010>-c</span> <span style=color:#960050;background-color:#1e0010>/home/xxx/config</span><span style=color:#ae81ff>1</span><span style=color:#960050;background-color:#1e0010>.json</span> <span style=color:#960050;background-color:#1e0010>-f</span> <span style=color:#960050;background-color:#1e0010>/tmp/</span><span style=color:#ae81ff>1</span><span style=color:#960050;background-color:#1e0010>.pid</span>
<span style=color:#960050;background-color:#1e0010>xxx</span>      <span style=color:#ae81ff>1491</span>     <span style=color:#ae81ff>1</span>  <span style=color:#ae81ff>0</span> <span style=color:#ae81ff>20</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#ae81ff>24</span> <span style=color:#960050;background-color:#1e0010>?</span>        <span style=color:#ae81ff>00</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#ae81ff>00</span><span style=color:#960050;background-color:#1e0010>:</span><span style=color:#ae81ff>00</span> <span style=color:#960050;background-color:#1e0010>ss-server</span> <span style=color:#960050;background-color:#1e0010>-c</span> <span style=color:#960050;background-color:#1e0010>/home/xxx/config</span><span style=color:#ae81ff>2</span><span style=color:#960050;background-color:#1e0010>.json</span> <span style=color:#960050;background-color:#1e0010>-f</span> <span style=color:#960050;background-color:#1e0010>/tmp/</span><span style=color:#ae81ff>2</span><span style=color:#960050;background-color:#1e0010>.pid</span>
</code></pre></div><h3 id=使用supervisor托管shadowsocks>使用supervisor托管shadowsocks<a hidden class=anchor aria-hidden=true href=#使用supervisor托管shadowsocks>#</a></h3><p>请参考<a href=https://blog.phpgao.com/supervisor_shadowsocks.html>使用supervisor托管shadowsocks</a>，让shadowsocks运行的更稳定！</p><p>至此，服务器端可设置已完成！</p><h2 id=客户端>客户端<a hidden class=anchor aria-hidden=true href=#客户端>#</a></h2><p>当我们搭建完成了shadowsocks服务端，其实只完成了FQ的一半工作，想要真正与世界联通，还需要一个客户端与服务端连接。</p><p>ss的客户端也是由<a href=http://sourceforge.net/u/clowwindy/profile/>clowwindy</a>大牛提供，他的另一个作品<a href=http://sourceforge.net/projects/chinadns/>ChinaDNS</a>也很NB，大家可以关注一下！</p><h3 id=客户端下载>客户端下载<a hidden class=anchor aria-hidden=true href=#客户端下载>#</a></h3><p>shadowsocks的客户端、服务端还有chrome插件Proxy-SwitchyOmega_v2.3.13的下载，请移步 <a href=https://blog.phpgao.com/download_shadowsocks.html>shadowsocks相关资源下载</a></p><p>下面老高以ShadowsocksX-2.6为例，讲讲如何配置</p><h4 id=首先安装完毕后找到应用程序并运行>首先安装完毕后找到应用程序并运行<a hidden class=anchor aria-hidden=true href=#首先安装完毕后找到应用程序并运行>#</a></h4><p><img loading=lazy src=https://blog.phpgao.com/usr/uploads/2015/01/3924810688.png alt=首先安装完毕后找到应用程序并运行></p><p>运行后程序会最小化在系统右上角（Windows在右下角），打开菜单，点击服务器&ndash;&#187;服务器设定</p><p><img loading=lazy src=https://blog.phpgao.com/usr/uploads/2015/01/61779355.png alt=服务器设定></p><h4 id=配置方法>配置方法<a hidden class=anchor aria-hidden=true href=#配置方法>#</a></h4><p><img loading=lazy src=https://blog.phpgao.com/usr/uploads/2015/01/1576391580.png alt=config></p><p>其中1.1.1.1即服务器的IP地址
端口号对应服务器设定的server_port
加密方式和密码就更不必说了</p><p>添加完毕，点击确定后，客户端和服务器马上就可以见面了。</p><h4 id=最后一步>最后一步<a hidden class=anchor aria-hidden=true href=#最后一步>#</a></h4><p>打开Shadowsocks，教程完毕！</p><p><img loading=lazy src=https://blog.phpgao.com/usr/uploads/2015/01/345323987.png alt=打开ss></p><blockquote><p>ps.想要在快速的在影梭配置服务器，可以通过在PC端点击生成二维码按钮，然后使用影梭扫描即可！</p></blockquote><p>老高望着着简单而粗狂的画面，许久说不出话来。</p><p><img loading=lazy src=https://blog.phpgao.com/usr/uploads/2015/01/3013662827.png alt="hello google"></p><p>是不是激动的要哭了？</p><p>今天先写到这儿，十分感谢广大基友的捧场！老高在此十分感谢！</p><p>有兴趣的TX可以在此留下你的邮箱，用<code>AT</code>替换调你的<code>@</code>，老高有一个闲置的VPS可以提供测试ss帐号，也是<a href=https://blog.phpgao.com/vps.html>搬瓦工</a>的。</p><p>密码大概想起来再改一次，流量不多，看油兔就算了吧。</p><p><a href=https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif>Proxy SwitchyOmega下载地址</a></p><h2 id=浏览器>浏览器<a hidden class=anchor aria-hidden=true href=#浏览器>#</a></h2><p>shadowsocks的浏览器支持主要是通过扩展设置代理。目前chrome、firefox、Safari、Opera浏览器都完美支持。</p><p>浏览器只要配置一下，使用客户端提供的端口就能够工作了。</p><p>值得一提的gfwlist，有了他你无需自己写规则了，把它加入在线规则里，更新一下即可！</p><p><code>https://autoproxy-gfwlist.googlecode.com/svn/trunk/g{防}f{he}w{xie}list.txt</code></p><p>firefox -> Foxyproxy
chrome -> switchsharp</p><p>2014年8月20日更新：</p><p>增加一个客户端</p><p>2015年1月7日更新：</p><p><a href=https://github.com/shadowsocks/shadowsocks/wiki/Encryption>加密说明</a></p><p>Proxy SwitchyOmega更新</p><p>2015年01月08日更新：</p><p>文章重构</p><p>2015年3月12日更新：</p><p><a href=https://blog.phpgao.com/supervisor_shadowsocks.html>使用supervisor托管shadowsocks</a>，让shadowsocks运行的更稳定！</p><hr><p>猜你喜欢：</p><p><a href=https://blog.phpgao.com/carzy_router.html>小米路由器mini折腾之自动翻墙篇</a></p><p><a href=https://blog.phpgao.com/vps.html>30元一年，打造自己的翻墙VPS</a></p><p><a href=https://blog.phpgao.com/vps_ssh.html>VPS安全之SSH设置</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://phpgao.github.io/tags/linux/>Linux</a></li><li><a href=https://phpgao.github.io/tags/shadowsocks/>shadowsocks</a></li><li><a href=https://phpgao.github.io/tags/fq/>fq</a></li><li><a href=https://phpgao.github.io/tags/free/>free</a></li></ul><nav class=paginav><a class=prev href=https://phpgao.github.io/python_socks_proxy.html><span class=title>« Prev Page</span><br><span>在python的urllib2中使用socks代理</span></a>
<a class=next href=https://phpgao.github.io/ctorrent.html><span class=title>Next Page »</span><br><span>在linux下安装ctorrent下载种子文件</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://phpgao.github.io/>老高的技术博客</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>