<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>-etc-profile,-etc-bashrc等文件的区别与作用 | 老高的技术博客</title><meta name=keywords content="shell,Linux,bash"><meta name=description content="当我们在做一些与bash相关的操作时，比如设置别名、登录启动项等，多多少少都会与下面几个文件打交道，用的时候一查，然后又忘了。好记性不如烂笔头，下面老高就帮你理一理这些文件到底是干啥的。

/etc/profile
/etc/bashrc
~/.bash_profile
~/.bashrc
"><meta name=author content="Me"><link rel=canonical href=https://phpgao.github.io/profile_bashrc_bash_profile_bashrc_definition.html><link crossorigin=anonymous href=/assets/css/stylesheet.min.1a6ee89730e13a801d0f34e0cb5b98e96cf8c65b80500638bd599fc224ed8442.css integrity="sha256-Gm7olzDhOoAdDzTgy1uY6Wz4xluAUAY4vVmfwiTthEI=" rel="preload stylesheet" as=style><link rel=preload href="https://cdn.v2ex.com/gravatar/2b66f45a3e2f41db6522381006bfaea1?s=192" as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://phpgao.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://phpgao.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://phpgao.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://phpgao.github.io/apple-touch-icon.png><link rel=mask-icon href=https://phpgao.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.83.1"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-39288145-2','auto'),ga('send','pageview'))</script><meta property="og:title" content="-etc-profile,-etc-bashrc等文件的区别与作用"><meta property="og:description" content="当我们在做一些与bash相关的操作时，比如设置别名、登录启动项等，多多少少都会与下面几个文件打交道，用的时候一查，然后又忘了。好记性不如烂笔头，下面老高就帮你理一理这些文件到底是干啥的。

/etc/profile
/etc/bashrc
~/.bash_profile
~/.bashrc
"><meta property="og:type" content="article"><meta property="og:url" content="https://phpgao.github.io/profile_bashrc_bash_profile_bashrc_definition.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-05-28T17:14:00+00:00"><meta property="article:modified_time" content="2015-05-28T17:14:00+00:00"><meta property="og:site_name" content="老高的技术博客"><meta name=twitter:card content="summary"><meta name=twitter:title content="-etc-profile,-etc-bashrc等文件的区别与作用"><meta name=twitter:description content="当我们在做一些与bash相关的操作时，比如设置别名、登录启动项等，多多少少都会与下面几个文件打交道，用的时候一查，然后又忘了。好记性不如烂笔头，下面老高就帮你理一理这些文件到底是干啥的。

/etc/profile
/etc/bashrc
~/.bash_profile
~/.bashrc
"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://phpgao.github.io/posts/"},{"@type":"ListItem","position":2,"name":"-etc-profile,-etc-bashrc等文件的区别与作用","item":"https://phpgao.github.io/profile_bashrc_bash_profile_bashrc_definition.html"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"-etc-profile,-etc-bashrc等文件的区别与作用","name":"-etc-profile,-etc-bashrc等文件的区别与作用","description":"当我们在做一些与bash相关的操作时，比如设置别名、登录启动项等，多多少少都会与下面几个文件打交道，用的时候一查，然后又忘了。好记性不如烂笔头，下面老高就帮你理一理这些文件到底是干啥的。\n /etc/profile /etc/bashrc ~/.bash_profile ~/.bashrc ","keywords":["shell","Linux","bash"],"articleBody":"当我们在做一些与bash相关的操作时，比如设置别名、登录启动项等，多多少少都会与下面几个文件打交道，用的时候一查，然后又忘了。好记性不如烂笔头，下面老高就帮你理一理这些文件到底是干啥的。\n /etc/profile /etc/bashrc ~/.bash_profile ~/.bashrc   man bash —– INVOCATION\n以CENTOS为例，其他系统可能略有区别。\n登录shell\n A login shell is one whose first character of argument zero is a -, or one started with the –login option.\n 老高注解：\n判断一个shell是不是登录shell，只要你是su -, bash --login这样进入的就行，如果你进入一个terminal而不需要登录，即输入用户名密码，那么他就是一个 non-login shell。比如你在MAC下打开终端，是不需要登录过程的所以是non-login shell。\n还有一个方法，echo $0，如果是登录shell，则会返回-[bash name]，否则返回[bash name]。\n交互式Shell\n An interactive shell is one started without non-option arguments and without the -c option whose standard input and error are both connected to terminals (as determined by isatty(3)), or one started with the -i option. PS1 is set and $- includes i if bash is interactive,allowing a shell script or a startup file to test this state.\n 老高注解：\n判断一个交互式shell也很简单echo $-的结果中包含小写字母i就是了。\n 当你运行一个脚本时，那就是一个非交互式shell。\n  When bash is started non-interactively, to run a shell script, for example, it looks for the variable BASH_ENV in the environment, expands its value if it appears there, and uses the expanded value as the name of a file to read and execute. Bash behaves as if the following command were executed: if [ -n “$BASH_ENV” ]; then . “$BASH_ENV”; fi but the value of the PATH variable is not used to search for the file name.\n 老高翻译：\n当一个非交互的shell运行一个shell脚本时，他会在环境变量中 $BASH_ENV 并执行。代码为if [ -n \"$BASH_ENV\" ]; then . \"$BASH_ENV\"; fi。\n The following paragraphs describe how bash executes its startup files. If any of the files exist but cannot be read, bash reports an error. Tildes are expanded in file names as described below under Tilde Expansion in the EXPANSION section.\n  When bash is invoked as an interactive login shell, or as a non-interactive shell with the –login option, it first reads and executes commands from the file /etc/profile, if that file exists. After reading that file, it looks for ~/.bash_profile, ~/.bash_login, and ~/.profile, in that order, and reads and executes commands from the first one that exists and is readable. The –noprofile option may be used when the shell is started to inhibit this behavior.\n 老高翻译：\n当你登录一个交互式的shell后，如果**/etc/profile**存在，bash首先会读取**/etc/profile**的配置，然后再依次读取对应用户的~/.bash_profile、~/.bash_login和~/.profile。\n When a login shell exits, bash reads and executes commands from the file ~/.bash_logout, if it exists.\n 老高翻译：\n当一个登录shell退出的时候，如果当前用户的~/.bash_logout存在，bash会读取他。\n When an interactive shell that is not a login shell is started, bash reads and executes commands from ~/.bashrc, if that file exists. This may be inhibited by using the –norc option. The –rcfile file option will force bash to read and execute commands from file instead of ~/.bashrc.\n 老高翻译：\n当一个非登陆shell运行，如果对应用户的~/.bashrc存在，bash首先会读取~/.bashrc，有个--norc option能阻止读取，还有个--rcfile的选项可以强制读取指定文件。\n综上：\n~/.bashrc与/etc/bashrc、~/.bash_profile与/etc/profile的关系一样，都是一个针对某个用户，一个针对全局设置。读取的时候也是全局优先。\n 交互式shell登录时读取profile，初始化时读取bashrc。\n非交互式只会读取bashrc。\n一般把alias和function一类的放到bashrc或~/.bashrc中。\n而把export更多的放在profile文件中。\n推荐大家参考My bashrc, bash aliases, profile and other files的配置；\n同时安装Linux下最好的shell ：zsh + oh-my-zsh 默认shell的最佳替代品；\n如果还是钟情与bash，那么老高推荐你安装bash-completion，自动补全的功能很好用！\n","wordCount":"403","inLanguage":"en","datePublished":"2015-05-28T17:14:00Z","dateModified":"2015-05-28T17:14:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://phpgao.github.io/profile_bashrc_bash_profile_bashrc_definition.html"},"publisher":{"@type":"Organization","name":"老高的技术博客","logo":{"@type":"ImageObject","url":"https://phpgao.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://phpgao.github.io/ accesskey=h title="老高的博客 (Alt + H)">老高的博客</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://phpgao.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://phpgao.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://blog.phpgao.com title="old blog"><span>old blog</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://phpgao.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://phpgao.github.io/posts/>Posts</a></div><h1 class=post-title>-etc-profile,-etc-bashrc等文件的区别与作用</h1><div class=post-meta>May 28, 2015&nbsp;·&nbsp;2 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/2015-05-28_profile_bashrc_bash_profile_bashrc_definition.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>当我们在做一些与bash相关的操作时，比如设置别名、登录启动项等，多多少少都会与下面几个文件打交道，用的时候一查，然后又忘了。好记性不如烂笔头，下面老高就帮你理一理这些文件到底是干啥的。</p><ul><li>/etc/profile</li><li>/etc/bashrc</li><li>~/.bash_profile</li><li>~/.bashrc</li></ul><hr><p><code>man bash</code> &mdash;&ndash; INVOCATION</p><p>以CENTOS为例，其他系统可能略有区别。</p><p><strong>登录shell</strong></p><blockquote><p>A login shell is one whose first character of argument zero is a -, or one started with the &ndash;login option.</p></blockquote><p>老高注解：</p><p>判断一个shell是不是登录shell，只要你是<code>su -</code>, <code>bash --login</code>这样进入的就行，如果你进入一个terminal而不需要登录，即输入用户名密码，那么他就是一个 non-login shell。比如你在MAC下打开终端，是不需要登录过程的所以是non-login shell。</p><p>还有一个方法，<code>echo $0</code>，如果是登录shell，则会返回<code>-[bash name]</code>，否则返回[bash name]。</p><p><strong>交互式Shell</strong></p><blockquote><p>An interactive shell is one started without non-option arguments and without the -c option whose standard input and error are both connected to terminals (as determined by isatty(3)), or one started with the -i option. PS1 is set and $- includes i if bash is interactive,allowing a shell script or a startup file to test this state.</p></blockquote><p>老高注解：</p><p>判断一个交互式shell也很简单<code>echo $-</code>的结果中包含小写字母i就是了。</p><blockquote><p>当你运行一个脚本时，那就是一个非交互式shell。</p></blockquote><blockquote><p>When bash is started non-interactively, to run a shell script, for example, it looks for the variable BASH_ENV in the environment, expands its value if it appears there, and uses the expanded value as the name of a file to read and execute. Bash behaves as if the following command were executed:
if [ -n &ldquo;$BASH_ENV&rdquo; ]; then . &ldquo;$BASH_ENV&rdquo;; fi
but the value of the PATH variable is not used to search for the file name.</p></blockquote><p>老高翻译：</p><p>当一个非交互的shell运行一个shell脚本时，他会在环境变量中 <code>$BASH_ENV</code> 并执行。代码为<code>if [ -n "$BASH_ENV" ]; then . "$BASH_ENV"; fi</code>。</p><blockquote><p>The following paragraphs describe how bash executes its startup files. If any of the files exist but cannot be read, bash reports an error. Tildes are expanded in file names as described below under Tilde Expansion in the EXPANSION section.</p></blockquote><blockquote><p>When bash is invoked as an interactive login shell, or as a non-interactive shell with the &ndash;login option, it first reads and executes commands from the file /etc/profile, if that file exists. After reading that file, it looks for ~/.bash_profile, ~/.bash_login, and ~/.profile, in that order, and reads and executes commands from the first one that exists and is readable. The &ndash;noprofile option may be used when the shell is started to inhibit this behavior.</p></blockquote><p>老高翻译：</p><p>当你登录一个交互式的shell后，如果**/etc/profile**存在，bash首先会读取**/etc/profile**的配置，然后再依次读取对应用户的<code>~/.bash_profile</code>、<code>~/.bash_login</code>和<code>~/.profile</code>。</p><blockquote><p>When a login shell exits, bash reads and executes commands from the file ~/.bash_logout, if it exists.</p></blockquote><p>老高翻译：</p><p>当一个登录shell退出的时候，如果当前用户的<code>~/.bash_logout</code>存在，bash会读取他。</p><blockquote><p>When an interactive shell that is not a login shell is started, bash reads and executes commands from ~/.bashrc, if that file exists. This may be inhibited by using the &ndash;norc option. The &ndash;rcfile file option will force bash to read and execute commands from file instead of ~/.bashrc.</p></blockquote><p>老高翻译：</p><p>当一个非登陆shell运行，如果对应用户的<code>~/.bashrc</code>存在，bash首先会读取<code>~/.bashrc</code>，有个<code>--norc option</code>能阻止读取，还有个<code>--rcfile</code>的选项可以强制读取指定文件。</p><p>综上：</p><p>~/.bashrc与/etc/bashrc、~/.bash_profile与/etc/profile的关系一样，都是一个针对某个用户，一个针对全局设置。读取的时候也是全局优先。</p><hr><p>交互式shell登录时读取<code>profile</code>，初始化时读取<code>bashrc</code>。</p><p>非交互式只会读取<code>bashrc</code>。</p><p>一般把<code>alias</code>和<code>function</code>一类的放到<code>bashrc</code>或<code>~/.bashrc</code>中。</p><p>而把<code>export</code>更多的放在profile文件中。</p><p>推荐大家参考<a href=http://stefaanlippens.net/my_bashrc_aliases_profile_and_other_stuff>My bashrc, bash aliases, profile and other files</a>的配置；</p><p>同时安装Linux下最好的shell ：<a href=https://blog.phpgao.com/oh-my-zsh.html>zsh + oh-my-zsh 默认shell的最佳替代品</a>；</p><p>如果还是钟情与bash，那么老高推荐你安装<code>bash-completion</code>，自动补全的功能很好用！</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://phpgao.github.io/tags/shell/>shell</a></li><li><a href=https://phpgao.github.io/tags/linux/>Linux</a></li><li><a href=https://phpgao.github.io/tags/bash/>bash</a></li></ul><nav class=paginav><a class=prev href=https://phpgao.github.io/vbird_linux_note_network.html><span class=title>« Prev Page</span><br><span>鸟哥的私房菜学习笔记----网络速查</span></a>
<a class=next href=https://phpgao.github.io/linux-trash-cli.html><span class=title>Next Page »</span><br><span>Linux下安装trash-cli防止误删文件</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://phpgao.github.io/>老高的技术博客</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>