<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>mysql中localhost和127.0.0.1的区别 | 老高的技术博客</title><meta name=keywords content="mysql,localhost,pipes"><meta name=description content="mysql的默认的root用户会有很多行，自习观察后你就会发现每行的用户名或密码可能相同，但是host一定不同，host是登陆用户的主机名，也就是说，&lsquo;localhost&rsquo;,&lsquo;127.0.0.1&rsquo;,&lsquo;phpgao.local&rsquo;,'%&lsquo;都算不同的用户！
理解了这一点后，那么我的问题就附上水面了！
有些TX经常会遇到这个问题：
 使用PHP连接mysql数据库，使用localhost作为主机名总是连接失败，但是使用'127.0.0.1&rsquo;就可以顺利连接，这到底是为什么？
  mysql中HOST为localhost和127.0.0.1到底有什么区别？
 经过一番搜索，老高总结如下：
使用到的命令
mysql>status; mysql>show grants;   类Unix系统下，如果不使用-h指定主机名或者使用了localhost，那么会使用unix domain socket与mysql服务器沟通，比TCP/IP快一些！所以你想使用TCP/IP协议，请将host指定为'127.0.0.1&rsquo;。
  PHP连接mysql如果使用&rsquo;localhost&rsquo;发生问题，首先可以明确的是PHP会试着使用unix domain socket与服务器连接，所以请检查php.ini中mysql.default_socket = /var/mysql/mysql.sock是否配置正确。
  如果想要明确连接方式，可以再配置文件中显式声明
  protocol=tcp 在mysql的官方文档中解释道:如果mysql在win上跑，如果系统开启了&ndash;enable-named-pipe，然后访问服务器的时候没有指定hostname，那么mysql客户端会以pipe为优先连接，如果连接失败，那么再会去尝试使用TCP/IP去连接。你可以指定hostname为.在win下强制使用pipes。   If the MySQL server is running on Windows, you can connect using TCP/IP. If the server is started with the &ndash;enable-named-pipe option, you can also connect with named pipes if you run the client on the host where the server is running."><meta name=author content="Me"><link rel=canonical href=https://phpgao.github.io/mysql_hostname_issue.html><link crossorigin=anonymous href=/assets/css/stylesheet.min.1a6ee89730e13a801d0f34e0cb5b98e96cf8c65b80500638bd599fc224ed8442.css integrity="sha256-Gm7olzDhOoAdDzTgy1uY6Wz4xluAUAY4vVmfwiTthEI=" rel="preload stylesheet" as=style><link rel=preload href="https://cdn.v2ex.com/gravatar/2b66f45a3e2f41db6522381006bfaea1?s=192" as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://phpgao.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://phpgao.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://phpgao.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://phpgao.github.io/apple-touch-icon.png><link rel=mask-icon href=https://phpgao.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.83.1"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-39288145-2','auto'),ga('send','pageview'))</script><meta property="og:title" content="mysql中localhost和127.0.0.1的区别"><meta property="og:description" content="mysql的默认的root用户会有很多行，自习观察后你就会发现每行的用户名或密码可能相同，但是host一定不同，host是登陆用户的主机名，也就是说，&lsquo;localhost&rsquo;,&lsquo;127.0.0.1&rsquo;,&lsquo;phpgao.local&rsquo;,'%&lsquo;都算不同的用户！
理解了这一点后，那么我的问题就附上水面了！
有些TX经常会遇到这个问题：
 使用PHP连接mysql数据库，使用localhost作为主机名总是连接失败，但是使用'127.0.0.1&rsquo;就可以顺利连接，这到底是为什么？
  mysql中HOST为localhost和127.0.0.1到底有什么区别？
 经过一番搜索，老高总结如下：
使用到的命令
mysql>status; mysql>show grants;   类Unix系统下，如果不使用-h指定主机名或者使用了localhost，那么会使用unix domain socket与mysql服务器沟通，比TCP/IP快一些！所以你想使用TCP/IP协议，请将host指定为'127.0.0.1&rsquo;。
  PHP连接mysql如果使用&rsquo;localhost&rsquo;发生问题，首先可以明确的是PHP会试着使用unix domain socket与服务器连接，所以请检查php.ini中mysql.default_socket = /var/mysql/mysql.sock是否配置正确。
  如果想要明确连接方式，可以再配置文件中显式声明
  protocol=tcp 在mysql的官方文档中解释道:如果mysql在win上跑，如果系统开启了&ndash;enable-named-pipe，然后访问服务器的时候没有指定hostname，那么mysql客户端会以pipe为优先连接，如果连接失败，那么再会去尝试使用TCP/IP去连接。你可以指定hostname为.在win下强制使用pipes。   If the MySQL server is running on Windows, you can connect using TCP/IP. If the server is started with the &ndash;enable-named-pipe option, you can also connect with named pipes if you run the client on the host where the server is running."><meta property="og:type" content="article"><meta property="og:url" content="https://phpgao.github.io/mysql_hostname_issue.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2015-01-19T05:18:00+00:00"><meta property="article:modified_time" content="2015-01-19T05:18:00+00:00"><meta property="og:site_name" content="老高的技术博客"><meta name=twitter:card content="summary"><meta name=twitter:title content="mysql中localhost和127.0.0.1的区别"><meta name=twitter:description content="mysql的默认的root用户会有很多行，自习观察后你就会发现每行的用户名或密码可能相同，但是host一定不同，host是登陆用户的主机名，也就是说，&lsquo;localhost&rsquo;,&lsquo;127.0.0.1&rsquo;,&lsquo;phpgao.local&rsquo;,'%&lsquo;都算不同的用户！
理解了这一点后，那么我的问题就附上水面了！
有些TX经常会遇到这个问题：
 使用PHP连接mysql数据库，使用localhost作为主机名总是连接失败，但是使用'127.0.0.1&rsquo;就可以顺利连接，这到底是为什么？
  mysql中HOST为localhost和127.0.0.1到底有什么区别？
 经过一番搜索，老高总结如下：
使用到的命令
mysql>status; mysql>show grants;   类Unix系统下，如果不使用-h指定主机名或者使用了localhost，那么会使用unix domain socket与mysql服务器沟通，比TCP/IP快一些！所以你想使用TCP/IP协议，请将host指定为'127.0.0.1&rsquo;。
  PHP连接mysql如果使用&rsquo;localhost&rsquo;发生问题，首先可以明确的是PHP会试着使用unix domain socket与服务器连接，所以请检查php.ini中mysql.default_socket = /var/mysql/mysql.sock是否配置正确。
  如果想要明确连接方式，可以再配置文件中显式声明
  protocol=tcp 在mysql的官方文档中解释道:如果mysql在win上跑，如果系统开启了&ndash;enable-named-pipe，然后访问服务器的时候没有指定hostname，那么mysql客户端会以pipe为优先连接，如果连接失败，那么再会去尝试使用TCP/IP去连接。你可以指定hostname为.在win下强制使用pipes。   If the MySQL server is running on Windows, you can connect using TCP/IP. If the server is started with the &ndash;enable-named-pipe option, you can also connect with named pipes if you run the client on the host where the server is running."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://phpgao.github.io/posts/"},{"@type":"ListItem","position":2,"name":"mysql中localhost和127.0.0.1的区别","item":"https://phpgao.github.io/mysql_hostname_issue.html"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"mysql中localhost和127.0.0.1的区别","name":"mysql中localhost和127.0.0.1的区别","description":"mysql的默认的root用户会有很多行，自习观察后你就会发现每行的用户名或密码可能相同，但是host一定不同，host是登陆用户的主机名，也就是说，\u0026lsquo;localhost\u0026rsquo;,\u0026lsquo;127.0.0.1\u0026rsquo;,\u0026lsquo;phpgao.local\u0026rsquo;,'%\u0026lsquo;都算不同的用户！\n理解了这一点后，那么我的问题就附上水面了！\n有些TX经常会遇到这个问题：\n 使用PHP连接mysql数据库，使用localhost作为主机名总是连接失败，但是使用'127.0.0.1\u0026rsquo;就可以顺利连接，这到底是为什么？\n  mysql中HOST为localhost和127.0.0.1到底有什么区别？\n 经过一番搜索，老高总结如下：\n使用到的命令\nmysql\u0026gt;status; mysql\u0026gt;show grants;   类Unix系统下，如果不使用-h指定主机名或者使用了localhost，那么会使用unix domain socket与mysql服务器沟通，比TCP/IP快一些！所以你想使用TCP/IP协议，请将host指定为'127.0.0.1\u0026rsquo;。\n  PHP连接mysql如果使用\u0026rsquo;localhost\u0026rsquo;发生问题，首先可以明确的是PHP会试着使用unix domain socket与服务器连接，所以请检查php.ini中mysql.default_socket = /var/mysql/mysql.sock是否配置正确。\n  如果想要明确连接方式，可以再配置文件中显式声明\n  protocol=tcp 在mysql的官方文档中解释道:如果mysql在win上跑，如果系统开启了\u0026ndash;enable-named-pipe，然后访问服务器的时候没有指定hostname，那么mysql客户端会以pipe为优先连接，如果连接失败，那么再会去尝试使用TCP/IP去连接。你可以指定hostname为.在win下强制使用pipes。   If the MySQL server is running on Windows, you can connect using TCP/IP. If the server is started with the \u0026ndash;enable-named-pipe option, you can also connect with named pipes if you run the client on the host where the server is running.","keywords":["mysql","localhost","pipes"],"articleBody":"mysql的默认的root用户会有很多行，自习观察后你就会发现每行的用户名或密码可能相同，但是host一定不同，host是登陆用户的主机名，也就是说，‘localhost’,‘127.0.0.1’,‘phpgao.local’,'%‘都算不同的用户！\n理解了这一点后，那么我的问题就附上水面了！\n有些TX经常会遇到这个问题：\n 使用PHP连接mysql数据库，使用localhost作为主机名总是连接失败，但是使用'127.0.0.1’就可以顺利连接，这到底是为什么？\n  mysql中HOST为localhost和127.0.0.1到底有什么区别？\n 经过一番搜索，老高总结如下：\n使用到的命令\nmysqlstatus; mysqlshow grants;   类Unix系统下，如果不使用-h指定主机名或者使用了localhost，那么会使用unix domain socket与mysql服务器沟通，比TCP/IP快一些！所以你想使用TCP/IP协议，请将host指定为'127.0.0.1’。\n  PHP连接mysql如果使用’localhost’发生问题，首先可以明确的是PHP会试着使用unix domain socket与服务器连接，所以请检查php.ini中mysql.default_socket = /var/mysql/mysql.sock是否配置正确。\n  如果想要明确连接方式，可以再配置文件中显式声明\n  protocol=tcp 在mysql的官方文档中解释道:如果mysql在win上跑，如果系统开启了–enable-named-pipe，然后访问服务器的时候没有指定hostname，那么mysql客户端会以pipe为优先连接，如果连接失败，那么再会去尝试使用TCP/IP去连接。你可以指定hostname为.在win下强制使用pipes。   If the MySQL server is running on Windows, you can connect using TCP/IP. If the server is started with the –enable-named-pipe option, you can also connect with named pipes if you run the client on the host where the server is running. The name of the named pipe is MySQL by default. If you do not give a host name when connecting to mysqld, a MySQL client first tries to connect to the named pipe. If that does not work, it connects to the TCP/IP port. You can force the use of named pipes on Windows by using . as the host name.\n Reference:\nhttp://stackoverflow.com/questions/19712307/mysql-localhost-127-0-0-1 http://stackoverflow.com/questions/3715925/localhost-vs-127-0-0-1 http://dev.mysql.com/doc/refman/5.5/en/can-not-connect-to-server.html http://madproject.com/general/connect-to-mysql-using-localhost-instead-of-127-0-0-1-on-a-mac/ http://stackoverflow.com/questions/9714899/php-mysql-difference-between-127-0-0-1-and-localhost http://superuser.com/questions/744972/connecting-to-mysql-from-127-0-0-1-instead-of-from-localhost http://blog.csdn.net/xifeijian/article/details/12879395 http://blog.csdn.net/topasstem8/article/details/18357789\n","wordCount":"133","inLanguage":"en","datePublished":"2015-01-19T05:18:00Z","dateModified":"2015-01-19T05:18:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://phpgao.github.io/mysql_hostname_issue.html"},"publisher":{"@type":"Organization","name":"老高的技术博客","logo":{"@type":"ImageObject","url":"https://phpgao.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://phpgao.github.io/ accesskey=h title="老高的博客 (Alt + H)">老高的博客</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://phpgao.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://phpgao.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://blog.phpgao.com title="old blog"><span>old blog</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://phpgao.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://phpgao.github.io/posts/>Posts</a></div><h1 class=post-title>mysql中localhost和127.0.0.1的区别</h1><div class=post-meta>January 19, 2015&nbsp;·&nbsp;1 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/2015-01-19_mysql_hostname_issue.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>mysql的默认的root用户会有很多行，自习观察后你就会发现每行的用户名或密码可能相同，但是host一定不同，host是登陆用户的主机名，也就是说，&lsquo;localhost&rsquo;,&lsquo;127.0.0.1&rsquo;,&lsquo;phpgao.local&rsquo;,'%&lsquo;都算<strong>不同</strong>的用户！</p><p>理解了这一点后，那么我的问题就附上水面了！</p><p>有些TX经常会遇到这个问题：</p><blockquote><p>使用PHP连接mysql数据库，使用localhost作为主机名总是连接失败，但是使用'127.0.0.1&rsquo;就可以顺利连接，这到底是为什么？</p></blockquote><blockquote><p>mysql中HOST为localhost和127.0.0.1到底有什么区别？</p></blockquote><p>经过一番搜索，老高总结如下：</p><p>使用到的命令</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mysql&gt;status;
mysql&gt;show grants;
</code></pre></div><ol><li><p>类Unix系统下，如果不使用-h指定主机名或者使用了localhost，那么会使用unix domain socket与mysql服务器沟通，比TCP/IP快一些！所以你想使用TCP/IP协议，请将host指定为'127.0.0.1&rsquo;。</p></li><li><p>PHP连接mysql如果使用&rsquo;localhost&rsquo;发生问题，首先可以明确的是PHP会试着使用unix domain socket与服务器连接，所以请检查php.ini中<code>mysql.default_socket = /var/mysql/mysql.sock</code>是否配置正确。</p></li><li><p>如果想要明确连接方式，可以再配置文件中显式声明</p></li></ol><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>protocol=tcp
</code></pre></div><ol start=4><li>在mysql的官方文档中解释道:如果mysql在win上跑，如果系统开启了&ndash;enable-named-pipe，然后访问服务器的时候没有指定hostname，那么mysql客户端会以pipe为优先连接，如果连接失败，那么再会去尝试使用TCP/IP去连接。你可以指定hostname为<code>.</code>在win下强制使用pipes。</li></ol><blockquote><p>If the MySQL server is running on Windows, you can connect using TCP/IP. If the server is started with the &ndash;enable-named-pipe option, you can also connect with named pipes if you run the client on the host where the server is running. The name of the named pipe is MySQL by default. If you do not give a host name when connecting to mysqld, a MySQL client first tries to connect to the named pipe. If that does not work, it connects to the TCP/IP port. You can force the use of named pipes on Windows by using . as the host name.</p></blockquote><p>Reference:</p><p><a href=http://stackoverflow.com/questions/19712307/mysql-localhost-127-0-0-1>http://stackoverflow.com/questions/19712307/mysql-localhost-127-0-0-1</a>
<a href=http://stackoverflow.com/questions/3715925/localhost-vs-127-0-0-1>http://stackoverflow.com/questions/3715925/localhost-vs-127-0-0-1</a>
<a href=http://dev.mysql.com/doc/refman/5.5/en/can-not-connect-to-server.html>http://dev.mysql.com/doc/refman/5.5/en/can-not-connect-to-server.html</a>
<a href=http://madproject.com/general/connect-to-mysql-using-localhost-instead-of-127-0-0-1-on-a-mac/>http://madproject.com/general/connect-to-mysql-using-localhost-instead-of-127-0-0-1-on-a-mac/</a>
<a href=http://stackoverflow.com/questions/9714899/php-mysql-difference-between-127-0-0-1-and-localhost>http://stackoverflow.com/questions/9714899/php-mysql-difference-between-127-0-0-1-and-localhost</a>
<a href=http://superuser.com/questions/744972/connecting-to-mysql-from-127-0-0-1-instead-of-from-localhost>http://superuser.com/questions/744972/connecting-to-mysql-from-127-0-0-1-instead-of-from-localhost</a>
<a href=http://blog.csdn.net/xifeijian/article/details/12879395>http://blog.csdn.net/xifeijian/article/details/12879395</a>
<a href=http://blog.csdn.net/topasstem8/article/details/18357789>http://blog.csdn.net/topasstem8/article/details/18357789</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://phpgao.github.io/tags/mysql/>mysql</a></li><li><a href=https://phpgao.github.io/tags/localhost/>localhost</a></li><li><a href=https://phpgao.github.io/tags/pipes/>pipes</a></li></ul><nav class=paginav><a class=prev href=https://phpgao.github.io/python_print_formatted.html><span class=title>« Prev Page</span><br><span>python格式化输出dict等集合对象</span></a>
<a class=next href=https://phpgao.github.io/download_on_router.html><span class=title>Next Page »</span><br><span>在路由器下载文件</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://phpgao.github.io/>老高的技术博客</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>