<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>PHP方法总结 | 老高的技术博客</title><meta name=keywords content="PHP"><meta name=description content="编程时间长了，大家见过很多函数功能吧，比如获取用户IP等等，现在我将常用的PHP函数做个总结，方便大家COPY和使用。
<?php//获取用户IPfunction getIp(){$ip = &#34;&#34;;if (getenv('HTTP_CLIENT_IP') && strcasecmp(getenv('HTTP_CLIENT_IP'), 'unknow')) {$ip = getenv('HTTP_CLIENT_IP');} elseif (getenv('REMOTE_ADD') && strcasecmp(getenv('REMOTE_ADD'), 'unknow')) {$ip = getenv('REMOTE_ADD');} elseif (isset($_SERVER['REMOTE_ADDR']) && strcasecmp($_SERVER['REMOTE_ADDR'], 'unknow')) {$ip = $_SERVER['REMOTE_ADDR'];}return $ip;}//快速替换字符串//$arrayName = array('h'=>'s','o'=>'t','l'=>'xx');//echo strsReplace('hello',$arrayName);function strsReplace($str, $replaces){$subject=$str;foreach ($replaces as $k => $v)$subject = str_replace($k, $v, $subject);return $subject;}//规范文件名//$filename='&#34;<>/\\\asda/.,psd|&#34;';//echo tripFilename($filename);function tripFilename($filename){//$s=array(&#34;/&#34;,&#34;\\&#34;,&#34;?"><meta name=author content="Me"><link rel=canonical href=https://phpgao.github.io/php.html><link crossorigin=anonymous href=/assets/css/stylesheet.min.1a6ee89730e13a801d0f34e0cb5b98e96cf8c65b80500638bd599fc224ed8442.css integrity="sha256-Gm7olzDhOoAdDzTgy1uY6Wz4xluAUAY4vVmfwiTthEI=" rel="preload stylesheet" as=style><link rel=preload href="https://cdn.v2ex.com/gravatar/2b66f45a3e2f41db6522381006bfaea1?s=192" as=image><script defer crossorigin=anonymous src=/assets/js/highlight.min.7680afc38aa6b15ddf158a4f3780b7b1f7dde7e91d26f073e6229bb7a0793c92.js integrity="sha256-doCvw4qmsV3fFYpPN4C3sffd5+kdJvBz5iKbt6B5PJI=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://phpgao.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://phpgao.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://phpgao.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://phpgao.github.io/apple-touch-icon.png><link rel=mask-icon href=https://phpgao.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=generator content="Hugo 0.83.1"><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(a,e,f,g,b,c,d){a.GoogleAnalyticsObject=b,a[b]=a[b]||function(){(a[b].q=a[b].q||[]).push(arguments)},a[b].l=1*new Date,c=e.createElement(f),d=e.getElementsByTagName(f)[0],c.async=1,c.src=g,d.parentNode.insertBefore(c,d)}(window,document,'script','https://www.google-analytics.com/analytics.js','ga'),ga('create','UA-39288145-2','auto'),ga('send','pageview'))</script><meta property="og:title" content="PHP方法总结"><meta property="og:description" content="编程时间长了，大家见过很多函数功能吧，比如获取用户IP等等，现在我将常用的PHP函数做个总结，方便大家COPY和使用。
<?php//获取用户IPfunction getIp(){$ip = &#34;&#34;;if (getenv('HTTP_CLIENT_IP') && strcasecmp(getenv('HTTP_CLIENT_IP'), 'unknow')) {$ip = getenv('HTTP_CLIENT_IP');} elseif (getenv('REMOTE_ADD') && strcasecmp(getenv('REMOTE_ADD'), 'unknow')) {$ip = getenv('REMOTE_ADD');} elseif (isset($_SERVER['REMOTE_ADDR']) && strcasecmp($_SERVER['REMOTE_ADDR'], 'unknow')) {$ip = $_SERVER['REMOTE_ADDR'];}return $ip;}//快速替换字符串//$arrayName = array('h'=>'s','o'=>'t','l'=>'xx');//echo strsReplace('hello',$arrayName);function strsReplace($str, $replaces){$subject=$str;foreach ($replaces as $k => $v)$subject = str_replace($k, $v, $subject);return $subject;}//规范文件名//$filename='&#34;<>/\\\asda/.,psd|&#34;';//echo tripFilename($filename);function tripFilename($filename){//$s=array(&#34;/&#34;,&#34;\\&#34;,&#34;?"><meta property="og:type" content="article"><meta property="og:url" content="https://phpgao.github.io/php.html"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-04-10T15:43:00+00:00"><meta property="article:modified_time" content="2014-04-10T15:43:00+00:00"><meta property="og:site_name" content="老高的技术博客"><meta name=twitter:card content="summary"><meta name=twitter:title content="PHP方法总结"><meta name=twitter:description content="编程时间长了，大家见过很多函数功能吧，比如获取用户IP等等，现在我将常用的PHP函数做个总结，方便大家COPY和使用。
<?php//获取用户IPfunction getIp(){$ip = &#34;&#34;;if (getenv('HTTP_CLIENT_IP') && strcasecmp(getenv('HTTP_CLIENT_IP'), 'unknow')) {$ip = getenv('HTTP_CLIENT_IP');} elseif (getenv('REMOTE_ADD') && strcasecmp(getenv('REMOTE_ADD'), 'unknow')) {$ip = getenv('REMOTE_ADD');} elseif (isset($_SERVER['REMOTE_ADDR']) && strcasecmp($_SERVER['REMOTE_ADDR'], 'unknow')) {$ip = $_SERVER['REMOTE_ADDR'];}return $ip;}//快速替换字符串//$arrayName = array('h'=>'s','o'=>'t','l'=>'xx');//echo strsReplace('hello',$arrayName);function strsReplace($str, $replaces){$subject=$str;foreach ($replaces as $k => $v)$subject = str_replace($k, $v, $subject);return $subject;}//规范文件名//$filename='&#34;<>/\\\asda/.,psd|&#34;';//echo tripFilename($filename);function tripFilename($filename){//$s=array(&#34;/&#34;,&#34;\\&#34;,&#34;?"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://phpgao.github.io/posts/"},{"@type":"ListItem","position":2,"name":"PHP方法总结","item":"https://phpgao.github.io/php.html"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"PHP方法总结","name":"PHP方法总结","description":"编程时间长了，大家见过很多函数功能吧，比如获取用户IP等等，现在我将常用的PHP函数做个总结，方便大家COPY和使用。\n\u0026lt;?php\r//获取用户IP\rfunction getIp()\r{\r$ip = \u0026quot;\u0026quot;;\rif (getenv('HTTP_CLIENT_IP') \u0026amp;\u0026amp; strcasecmp(getenv('HTTP_CLIENT_IP'), 'unknow')) {\r$ip = getenv('HTTP_CLIENT_IP');\r} elseif (getenv('REMOTE_ADD') \u0026amp;\u0026amp; strcasecmp(getenv('REMOTE_ADD'), 'unknow')) {\r$ip = getenv('REMOTE_ADD');\r} elseif (isset($_SERVER['REMOTE_ADDR']) \u0026amp;\u0026amp; strcasecmp($_SERVER['REMOTE_ADDR'], 'unknow')) {\r$ip = $_SERVER['REMOTE_ADDR'];\r}\rreturn $ip;\r}\r//快速替换字符串\r//$arrayName = array('h'=\u0026gt;'s','o'=\u0026gt;'t','l'=\u0026gt;'xx');\r//echo strsReplace('hello',$arrayName);\rfunction strsReplace($str, $replaces)\r{\r$subject=$str;\rforeach ($replaces as $k =\u0026gt; $v)\r$subject = str_replace($k, $v, $subject);\rreturn $subject;\r}\r//规范文件名\r//$filename='\u0026quot;\u0026lt;\u0026gt;/\\\\\\asda/.,psd|\u0026quot;';\r//echo tripFilename($filename);\rfunction tripFilename($filename)\r{\r//$s=array(\u0026quot;/\u0026quot;,\u0026quot;\\\\\u0026quot;,\u0026quot;?","keywords":["PHP"],"articleBody":"编程时间长了，大家见过很多函数功能吧，比如获取用户IP等等，现在我将常用的PHP函数做个总结，方便大家COPY和使用。\n's','o'='t','l'='xx');\r//echo strsReplace('hello',$arrayName);\rfunction strsReplace($str, $replaces)\r{\r$subject=$str;\rforeach ($replaces as $k = $v)\r$subject = str_replace($k, $v, $subject);\rreturn $subject;\r}\r//规范文件名\r//$filename='\"/\\\\\\asda/.,psd|\"';\r//echo tripFilename($filename);\rfunction tripFilename($filename)\r{\r//$s=array(\"/\",\"\\\\\",\"?\",\"*\",\"\",'\"',\"|\",\",\",\"'\");//使用时请删除屏蔽\rreturn str_replace($s,\"\",$filename);\r}\r//PHP判断数组维度 //$arr=array('yiyi'=1212,'haha'=array('heihei'=array(array(\"a\")),\"b\"));\r//echo getMaxDim($arr);\rfunction getMaxDim($vDim)\r{\rif (!is_array($vDim))\rreturn 0;\relse {\r$max1 = 0;\rforeach ($vDim as $item1) {\r$t1 = getMaxDim($item1);\rif ($t1  $max1)\r$max1 = $t1;\r}\rreturn $max1 + 1;\r}\r}\r//给数字加小数点,默认格式为452.00\r//echo fee(452);\rfunction fee($fee, $size = 2)\r{\r$fee = trim($fee);\rif (empty($fee))\rreturn '0.00';\rif (!is_numeric($fee))\rreturn 'err';\rreturn number_format($fee, $size, '.', '');\r}\r//获取随机序列(注:实测数字最好9位一下)\r//echo random(9,1);\r//echo random(25);\rfunction random($length, $numeric = 0)\r{\rPHP_VERSION alert('\" . $msg . \"');\rwindow.history.back(-1);\r\";\recho $html;\rexit();\r}\r//提醒跳转\rfunction alertGoto($url, $msg)\r{\r$html = \"alert('\" . $msg . \"');\rtop.location = \\\"\" . $url . \"\\\";\r\";\recho $html;\rexit();\r}\r//建立文件夹\rfunction createDir($path)\r{\rif (!file_exists($path)) {\rcreateDir(dirname($path));\rmkdir($path);\r}\r}\r//删除文件夹\rfunction deleteDir($dir)\r{\r$dh = opendir($dir);\rwhile ($file = readdir($dh))\rif ($file != \".\" \u0026\u0026 $file != \"..\") {\r$fullpath = $dir . \"/\" . $file;\rif (!is_dir($fullpath))\runlink($fullpath);\relse\rdeleteDir($fullpath);\r}\rclosedir($dh);\rif (rmdir($dir))\rreturn true;\relse\rreturn false;\r}\r//获取扩展名\rfunction getFileType($filename)\r{\rif (substr_count($filename, \".\") == 0) { // 检查文件名中是否有.号。 return; // 返回空\r} else if (substr($filename, -1) == \".\") { // 检查是否以.结尾，即无扩展名 return; // 返回空 } else {\r$fileType = strrchr($filename, \".\"); // 从.号处切割 $fileType = substr($fileType, 1); // 去除.号 return $fileType; // 返回 }\r}\r//匹配手机号\rfunction checkTel($tel)\r{\rif (strlen($tel) != 11)\rreturn false;\rreturn preg_match('/^1(3|5|8)[0-9]{9}$/', $tel);\r}\r//检查EMAIL格式\rfunction checkEmail($email)\r{\rif ($email == '')\rreturn false;\rif (eregi(\"^[_\\.0-9a-z]+@([0-9a-z][0-9a-z]+\\.)+[a-z]{2,3}$\", $email))\rreturn true;\rreturn false;\r}\r//SMTP发送邮件\rfunction sendMail($mail)\r{\rglobal $m;\rif ($m-cfg['mailMethod'] == 'mail()') {\r}\rif ($m-cfg['mailMethod'] == 'smtp') {\rinclude_once \"lib/smtp.class.php\";\r$smtpserver = $m-cfg['smtpServer']; //您的smtp服务器的地址\r$port = empty($m-cfg['smtpPort']) ? '25' : $m-cfg['smtpPort']; //smtp服务器的端口，一般是 25 $smtpuser = $m-cfg['smtpCount']; //您登录smtp服务器的用户名\r$smtppwd = $m-cfg['smtpPas']; //您登录smtp服务器的密码\r$mailtype = \"HTML\"; //邮件的类型，可选值是 TXT 或 HTML ,TXT 表示是纯文本的邮件,HTML 表示是 html格式的邮件\r$sender = $m-cfg['smtpCount']; //发件人,一般要与您登录smtp服务器的用户名($smtpuser)相同,否则可能会因为smtp服务器的设置导致发送失败\r$smtp = new smtp($smtpserver, $port, true, $smtpuser, $smtppwd, $sender);\r$smtp-debug = true; //是否开启调试,只在测试程序时使用，正式使用时请将此行注释\r$send = $smtp-sendmail($mail['to'], $sender, $mail['subject'], $mail['body'], $mailtype);\rif ($send == 1)\rreturn true;\rreturn $this-smtp-logs;\r}\r}\r//检查身份证有效性\rfunction checkId($id_card)\r{\rif (strlen($id_card) == 18) {\rreturn idcard_checksum18($id_card);\r} elseif ((strlen($id_card) == 15)) {\r$id_card = idcard_15to18($id_card);\rreturn idcard_checksum18($id_card);\r} else {\rreturn false;\r}\r}\r// 计算身份证校验码，根据国家标准GB 11643-1999 function idcard_verify_number($idcard_base)\r{\rif (strlen($idcard_base) != 17) {\rreturn false;\r}\r//加权因子 $factor = array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2);\r//校验码对应值 $verify_number_list = array('1','0','X','9','8','7','6','5','4','3','2');\r$checksum = 0;\rfor ($i = 0; $i  ","wordCount":"693","inLanguage":"en","datePublished":"2014-04-10T15:43:00Z","dateModified":"2014-04-10T15:43:00Z","author":{"@type":"Person","name":"Me"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://phpgao.github.io/php.html"},"publisher":{"@type":"Organization","name":"老高的技术博客","logo":{"@type":"ImageObject","url":"https://phpgao.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add('dark'):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove('dark'):window.matchMedia('(prefers-color-scheme: dark)').matches&&document.body.classList.add('dark')</script><noscript><style type=text/css>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:#1d1e20;--entry:#2e2e33;--primary:rgba(255, 255, 255, 0.84);--secondary:rgba(255, 255, 255, 0.56);--tertiary:rgba(255, 255, 255, 0.16);--content:rgba(255, 255, 255, 0.74);--hljs-bg:#2e2e33;--code-bg:#37383e;--border:#333}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><header class=header><nav class=nav><div class=logo><a href=https://phpgao.github.io/ accesskey=h title="老高的博客 (Alt + H)">老高的博客</a>
<span class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></span></div><ul id=menu><li><a href=https://phpgao.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://phpgao.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://blog.phpgao.com title="old blog"><span>old blog</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://phpgao.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://phpgao.github.io/posts/>Posts</a></div><h1 class=post-title>PHP方法总结</h1><div class=post-meta>April 10, 2014&nbsp;·&nbsp;4 min&nbsp;·&nbsp;Me&nbsp;|&nbsp;<a href=https://github.com/%3cpath_to_repo%3e/content/posts/2014-04-10_php.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=post-content><p>编程时间长了，大家见过很多函数功能吧，比如获取用户IP等等，现在我将常用的PHP函数做个总结，方便大家COPY和使用。</p><pre><code>&lt;?php

//获取用户IP
function getIp()
{
    $ip = &quot;&quot;;
    if (getenv('HTTP_CLIENT_IP') &amp;&amp; strcasecmp(getenv('HTTP_CLIENT_IP'), 'unknow')) {
        $ip = getenv('HTTP_CLIENT_IP');
    } elseif (getenv('REMOTE_ADD') &amp;&amp; strcasecmp(getenv('REMOTE_ADD'), 'unknow')) {
        $ip = getenv('REMOTE_ADD');
    } elseif (isset($_SERVER['REMOTE_ADDR']) &amp;&amp; strcasecmp($_SERVER['REMOTE_ADDR'], 'unknow')) {
        $ip = $_SERVER['REMOTE_ADDR'];
    }
    return $ip;
}

//快速替换字符串
//$arrayName = array('h'=&gt;'s','o'=&gt;'t','l'=&gt;'xx');
//echo strsReplace('hello',$arrayName);
function strsReplace($str, $replaces)
{
	$subject=$str;
    foreach ($replaces as $k =&gt; $v)
        $subject = str_replace($k, $v, $subject);
    return $subject;
}

//规范文件名
//$filename='&quot;&lt;&gt;/\\\asda/.,psd|&quot;';
//echo tripFilename($filename);
function tripFilename($filename)
{
	//$s=array(&quot;/&quot;,&quot;\\&quot;,&quot;?&quot;,&quot;*&quot;,&quot;&lt;&quot;,&quot;&gt;&quot;,'&quot;',&quot;|&quot;,&quot;,&quot;,&quot;'&quot;);//使用时请删除屏蔽
    return str_replace($s,&quot;&quot;,$filename);
}

//PHP判断数组维度  
//$arr=array('yiyi'=&gt;1212,'haha'=&gt;array('heihei'=&gt;array(array(&quot;a&quot;)),&quot;b&quot;));
//echo getMaxDim($arr);
function getMaxDim($vDim)
{
    if (!is_array($vDim))
        return 0;
    else {
        $max1 = 0;
        foreach ($vDim as $item1) {
            $t1 = getMaxDim($item1);
            if ($t1 &gt; $max1)
                $max1 = $t1;
        }
        return $max1 + 1;
    }
}

//给数字加小数点,默认格式为452.00
//echo fee(452);
function fee($fee, $size = 2)
{
    $fee = trim($fee);
    if (empty($fee))
        return '0.00';
    if (!is_numeric($fee))
        return 'err';
    return number_format($fee, $size, '.', '');
}

//获取随机序列(注:实测数字最好9位一下)
//echo random(9,1);
//echo random(25);
function random($length, $numeric = 0)
{
    PHP_VERSION &lt; '4.2.0' &amp;&amp; mt_srand((double) microtime() * 100000000000);
    if ($numeric) {
        $hash = sprintf('%0' . $length . 'd', mt_rand(0, pow(10, $length) - 1));
    } else {
        $hash  = '';
        $chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789abcdefghijklmnopqrstuvwxyz';
        $max   = strlen($chars) - 1;
        for ($i = 0; $i &lt; $length; $i++) {
            $hash .= $chars[mt_rand(0, $max)];
        }
    }
    return $hash;
}

//错误提醒
function alertBack($msg = &quot;&quot;)
{
    $html = &quot;&lt;meta http-equiv=\&quot;Content-Type\&quot; content=\&quot;text/html; charset=utf-8\&quot; /&gt;
                   &lt;script type=\&quot;text/javascript\&quot; charset=\&quot;utf-8\&quot;&gt;
                      alert('&quot; . $msg . &quot;');
                      window.history.back(-1);
                   &lt;/script&gt;&quot;;
    echo $html;
    exit();
}

//提醒跳转
function alertGoto($url, $msg)
{
    $html = &quot;&lt;meta http-equiv=\&quot;Content-Type\&quot; content=\&quot;text/html; charset=utf-8\&quot; /&gt;
                   &lt;script type=\&quot;text/javascript\&quot; charset=\&quot;utf-8\&quot;&gt;
                      alert('&quot; . $msg . &quot;');
                      top.location = \&quot;&quot; . $url . &quot;\&quot;;
                   &lt;/script&gt;&quot;;
    echo $html;
    exit();
}

//建立文件夹
function createDir($path)
{
    if (!file_exists($path)) {
        createDir(dirname($path));
        mkdir($path);
    }
}

//删除文件夹
function deleteDir($dir)
{
    $dh = opendir($dir);
    while ($file = readdir($dh))
        if ($file != &quot;.&quot; &amp;&amp; $file != &quot;..&quot;) {
            $fullpath = $dir . &quot;/&quot; . $file;
            if (!is_dir($fullpath))
                unlink($fullpath);
            else
                deleteDir($fullpath);
        }
    closedir($dh);
    if (rmdir($dir))
        return true;
    else
        return false;
}

//获取扩展名
function getFileType($filename)
{
    if (substr_count($filename, &quot;.&quot;) == 0) { // 检查文件名中是否有.号。 
        return; // 返回空
    } else if (substr($filename, -1) == &quot;.&quot;) { // 检查是否以.结尾，即无扩展名 
        return; // 返回空 
    } else {
        $fileType = strrchr($filename, &quot;.&quot;); // 从.号处切割 
        $fileType = substr($fileType, 1); // 去除.号  
        return $fileType; // 返回  
    }
}

//匹配手机号
function checkTel($tel)
{
    if (strlen($tel) != 11)
        return false;
    return preg_match('/^1(3|5|8)[0-9]{9}$/', $tel);

}

//检查EMAIL格式
function checkEmail($email)
{
    if ($email == '')
        return false;
    if (eregi(&quot;^[_\.0-9a-z]+@([0-9a-z][0-9a-z]+\.)+[a-z]{2,3}$&quot;, $email))
        return true;
    return false;

}

//SMTP发送邮件
function sendMail($mail)
{
    global $m;
    if ($m-&gt;cfg['mailMethod'] == 'mail()') {
    }
    if ($m-&gt;cfg['mailMethod'] == 'smtp') {
        include_once &quot;lib/smtp.class.php&quot;;
        $smtpserver  = $m-&gt;cfg['smtpServer']; //您的smtp服务器的地址
        $port        = empty($m-&gt;cfg['smtpPort']) ? '25' : $m-&gt;cfg['smtpPort']; //smtp服务器的端口，一般是 25 
        $smtpuser    = $m-&gt;cfg['smtpCount']; //您登录smtp服务器的用户名
        $smtppwd     = $m-&gt;cfg['smtpPas']; //您登录smtp服务器的密码
        $mailtype    = &quot;HTML&quot;; //邮件的类型，可选值是 TXT 或 HTML ,TXT 表示是纯文本的邮件,HTML 表示是 html格式的邮件
        $sender      = $m-&gt;cfg['smtpCount']; //发件人,一般要与您登录smtp服务器的用户名($smtpuser)相同,否则可能会因为smtp服务器的设置导致发送失败
        $smtp        = new smtp($smtpserver, $port, true, $smtpuser, $smtppwd, $sender);
        $smtp-&gt;debug = true; //是否开启调试,只在测试程序时使用，正式使用时请将此行注释
        $send        = $smtp-&gt;sendmail($mail['to'], $sender, $mail['subject'], $mail['body'], $mailtype);
        if ($send == 1)
            return true;
        return $this-&gt;smtp-&gt;logs;
    }
}

//检查身份证有效性
function checkId($id_card)
{
    if (strlen($id_card) == 18) {
        return idcard_checksum18($id_card);
    } elseif ((strlen($id_card) == 15)) {
        $id_card = idcard_15to18($id_card);
        return idcard_checksum18($id_card);
    } else {
        return false;
    }
}
// 计算身份证校验码，根据国家标准GB 11643-1999 
function idcard_verify_number($idcard_base)
{
    if (strlen($idcard_base) != 17) {
        return false;
    }
    //加权因子 
    $factor             = array(7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2);
    //校验码对应值 
    $verify_number_list = array('1','0','X','9','8','7','6','5','4','3','2');
    $checksum           = 0;
    for ($i = 0; $i &lt; strlen($idcard_base); $i++) {
        $checksum += substr($idcard_base, $i, 1) * $factor[$i];
    }
    $mod           = $checksum % 11;
    $verify_number = $verify_number_list[$mod];
    return $verify_number;
}
// 将15位身份证升级到18位 
function idcard_15to18($idcard)
{
    if (strlen($idcard) != 15) {
        return false;
    } else {
        // 如果身份证顺序码是996 997 998 999，这些是为百岁以上老人的特殊编码 
        if (array_search(substr($idcard, 12, 3), array(
            '996',
            '997',
            '998',
            '999'
        )) !== false) {
            $idcard = substr($idcard, 0, 6) . '18' . substr($idcard, 6, 9);
        } else {
            $idcard = substr($idcard, 0, 6) . '19' . substr($idcard, 6, 9);
        }
    }
    $idcard = $idcard . idcard_verify_number($idcard);
    return $idcard;
}
// 18位身份证校验码有效性检查 
function idcard_checksum18($idcard)
{
    if (strlen($idcard) != 18) {
        return false;
    }
    $idcard_base = substr($idcard, 0, 17);
    if (idcard_verify_number($idcard_base) != strtoupper(substr($idcard, 17, 1))) {
        return false;
    } else {
        return true;
    }
}

//获取星期
//echo getWeek('2013-09-02');
function getWeek($day)
{
    $days = array('周日','周一','周二','周三','周四','周五','周六');
    $day  = explode('-', $day);
    return $days[date('w', mktime(0, 0, 0, $day[1], $day[2], $day[0]))];
}

?&gt;</code></pre></div><footer class=post-footer><ul class=post-tags><li><a href=https://phpgao.github.io/tags/php/>PHP</a></li></ul><nav class=paginav><a class=prev href=https://phpgao.github.io/10_css_mnemonics.html><span class=title>« Prev Page</span><br><span>CSS十条速记口诀</span></a>
<a class=next href=https://phpgao.github.io/wordpress_sql.html><span class=title>Next Page »</span><br><span>WP常用SQL总结</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2021 <a href=https://phpgao.github.io/>老高的技术博客</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://git.io/hugopapermod rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)"><button class=top-link id=top-link type=button accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></button></a>
<script>let menu=document.getElementById('menu');menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)},document.querySelectorAll('a[href^="#"]').forEach(a=>{a.addEventListener("click",function(b){b.preventDefault();var a=this.getAttribute("href").substr(1);window.matchMedia('(prefers-reduced-motion: reduce)').matches?document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(a)}']`).scrollIntoView({behavior:"smooth"}),a==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${a}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove('dark'),localStorage.setItem("pref-theme",'light')):(document.body.classList.add('dark'),localStorage.setItem("pref-theme",'dark'))})</script></body></html>